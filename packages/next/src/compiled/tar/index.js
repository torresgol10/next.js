(()=>{"use strict";var e={3540:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:true});t.findMadeSync=t.findMade=void 0;const s=i(1017);const findMade=async(e,i,n)=>{if(n===i){return}return e.statAsync(i).then((e=>e.isDirectory()?n:undefined),(n=>{const r=n;return r&&r.code==="ENOENT"?(0,t.findMade)(e,(0,s.dirname)(i),i):undefined}))};t.findMade=findMade;const findMadeSync=(e,i,n)=>{if(n===i){return undefined}try{return e.statSync(i).isDirectory()?n:undefined}catch(n){const r=n;return r&&r.code==="ENOENT"?(0,t.findMadeSync)(e,(0,s.dirname)(i),i):undefined}};t.findMadeSync=findMadeSync},6489:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:true});t.mkdirp=t.nativeSync=t.native=t.manualSync=t.manual=t.sync=t.mkdirpSync=t.useNativeSync=t.useNative=t.mkdirpNativeSync=t.mkdirpNative=t.mkdirpManualSync=t.mkdirpManual=void 0;const s=i(5140);const n=i(2081);const r=i(5600);const o=i(2972);const a=i(9368);var h=i(5140);Object.defineProperty(t,"mkdirpManual",{enumerable:true,get:function(){return h.mkdirpManual}});Object.defineProperty(t,"mkdirpManualSync",{enumerable:true,get:function(){return h.mkdirpManualSync}});var l=i(2081);Object.defineProperty(t,"mkdirpNative",{enumerable:true,get:function(){return l.mkdirpNative}});Object.defineProperty(t,"mkdirpNativeSync",{enumerable:true,get:function(){return l.mkdirpNativeSync}});var c=i(9368);Object.defineProperty(t,"useNative",{enumerable:true,get:function(){return c.useNative}});Object.defineProperty(t,"useNativeSync",{enumerable:true,get:function(){return c.useNativeSync}});const mkdirpSync=(e,t)=>{e=(0,o.pathArg)(e);const i=(0,r.optsArg)(t);return(0,a.useNativeSync)(i)?(0,n.mkdirpNativeSync)(e,i):(0,s.mkdirpManualSync)(e,i)};t.mkdirpSync=mkdirpSync;t.sync=t.mkdirpSync;t.manual=s.mkdirpManual;t.manualSync=s.mkdirpManualSync;t.native=n.mkdirpNative;t.nativeSync=n.mkdirpNativeSync;t.mkdirp=Object.assign((async(e,t)=>{e=(0,o.pathArg)(e);const i=(0,r.optsArg)(t);return(0,a.useNative)(i)?(0,n.mkdirpNative)(e,i):(0,s.mkdirpManual)(e,i)}),{mkdirpSync:t.mkdirpSync,mkdirpNative:n.mkdirpNative,mkdirpNativeSync:n.mkdirpNativeSync,mkdirpManual:s.mkdirpManual,mkdirpManualSync:s.mkdirpManualSync,sync:t.mkdirpSync,native:n.mkdirpNative,nativeSync:n.mkdirpNativeSync,manual:s.mkdirpManual,manualSync:s.mkdirpManualSync,useNative:a.useNative,useNativeSync:a.useNativeSync})},5140:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:true});t.mkdirpManual=t.mkdirpManualSync=void 0;const s=i(1017);const n=i(5600);const mkdirpManualSync=(e,i,r)=>{const o=(0,s.dirname)(e);const a={...(0,n.optsArg)(i),recursive:false};if(o===e){try{return a.mkdirSync(e,a)}catch(e){const t=e;if(t&&t.code!=="EISDIR"){throw e}return}}try{a.mkdirSync(e,a);return r||e}catch(i){const s=i;if(s&&s.code==="ENOENT"){return(0,t.mkdirpManualSync)(e,a,(0,t.mkdirpManualSync)(o,a,r))}if(s&&s.code!=="EEXIST"&&s&&s.code!=="EROFS"){throw i}try{if(!a.statSync(e).isDirectory())throw i}catch(e){throw i}}};t.mkdirpManualSync=mkdirpManualSync;t.mkdirpManual=Object.assign((async(e,i,r)=>{const o=(0,n.optsArg)(i);o.recursive=false;const a=(0,s.dirname)(e);if(a===e){return o.mkdirAsync(e,o).catch((e=>{const t=e;if(t&&t.code!=="EISDIR"){throw e}}))}return o.mkdirAsync(e,o).then((()=>r||e),(async i=>{const s=i;if(s&&s.code==="ENOENT"){return(0,t.mkdirpManual)(a,o).then((i=>(0,t.mkdirpManual)(e,o,i)))}if(s&&s.code!=="EEXIST"&&s.code!=="EROFS"){throw i}return o.statAsync(e).then((e=>{if(e.isDirectory()){return r}else{throw i}}),(()=>{throw i}))}))}),{sync:t.mkdirpManualSync})},2081:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:true});t.mkdirpNative=t.mkdirpNativeSync=void 0;const s=i(1017);const n=i(3540);const r=i(5140);const o=i(5600);const mkdirpNativeSync=(e,t)=>{const i=(0,o.optsArg)(t);i.recursive=true;const a=(0,s.dirname)(e);if(a===e){return i.mkdirSync(e,i)}const h=(0,n.findMadeSync)(i,e);try{i.mkdirSync(e,i);return h}catch(t){const s=t;if(s&&s.code==="ENOENT"){return(0,r.mkdirpManualSync)(e,i)}else{throw t}}};t.mkdirpNativeSync=mkdirpNativeSync;t.mkdirpNative=Object.assign((async(e,t)=>{const i={...(0,o.optsArg)(t),recursive:true};const a=(0,s.dirname)(e);if(a===e){return await i.mkdirAsync(e,i)}return(0,n.findMade)(i,e).then((t=>i.mkdirAsync(e,i).then((e=>t||e)).catch((t=>{const s=t;if(s&&s.code==="ENOENT"){return(0,r.mkdirpManual)(e,i)}else{throw t}}))))}),{sync:t.mkdirpNativeSync})},5600:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:true});t.optsArg=void 0;const s=i(7147);const optsArg=e=>{if(!e){e={mode:511}}else if(typeof e==="object"){e={mode:511,...e}}else if(typeof e==="number"){e={mode:e}}else if(typeof e==="string"){e={mode:parseInt(e,8)}}else{throw new TypeError("invalid options argument")}const t=e;const i=e.fs||{};e.mkdir=e.mkdir||i.mkdir||s.mkdir;e.mkdirAsync=e.mkdirAsync?e.mkdirAsync:async(e,i)=>new Promise(((s,n)=>t.mkdir(e,i,((e,t)=>e?n(e):s(t)))));e.stat=e.stat||i.stat||s.stat;e.statAsync=e.statAsync?e.statAsync:async e=>new Promise(((i,s)=>t.stat(e,((e,t)=>e?s(e):i(t)))));e.statSync=e.statSync||i.statSync||s.statSync;e.mkdirSync=e.mkdirSync||i.mkdirSync||s.mkdirSync;return t};t.optsArg=optsArg},2972:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:true});t.pathArg=void 0;const s=process.env.__TESTING_MKDIRP_PLATFORM__||process.platform;const n=i(1017);const pathArg=e=>{if(/\0/.test(e)){throw Object.assign(new TypeError("path must be a string without null bytes"),{path:e,code:"ERR_INVALID_ARG_VALUE"})}e=(0,n.resolve)(e);if(s==="win32"){const t=/[*|"<>?:]/;const{root:i}=(0,n.parse)(e);if(t.test(e.substring(i.length))){throw Object.assign(new Error("Illegal characters in path."),{path:e,code:"EINVAL"})}}return e};t.pathArg=pathArg},9368:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:true});t.useNative=t.useNativeSync=void 0;const s=i(7147);const n=i(5600);const r=process.env.__TESTING_MKDIRP_NODE_VERSION__||process.version;const o=r.replace(/^v/,"").split(".");const a=+o[0]>10||+o[0]===10&&+o[1]>=12;t.useNativeSync=!a?()=>false:e=>(0,n.optsArg)(e).mkdirSync===s.mkdirSync;t.useNative=Object.assign(!a?()=>false:e=>(0,n.optsArg)(e).mkdir===s.mkdir,{sync:t.useNativeSync})},9491:e=>{e.exports=require("assert")},4300:e=>{e.exports=require("buffer")},2361:e=>{e.exports=require("events")},7147:e=>{e.exports=require("fs")},8061:e=>{e.exports=require("node:assert")},6005:e=>{e.exports=require("node:crypto")},5673:e=>{e.exports=require("node:events")},7561:e=>{e.exports=require("node:fs")},9411:e=>{e.exports=require("node:path")},4492:e=>{e.exports=require("node:stream")},6915:e=>{e.exports=require("node:string_decoder")},1017:e=>{e.exports=require("path")},9796:e=>{e.exports=require("zlib")},9561:function(e,t,i){var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});t.WriteStreamSync=t.WriteStream=t.ReadStreamSync=t.ReadStream=void 0;const n=s(i(2361));const r=s(i(7147));const o=i(3993);const a=r.default.writev;const h=Symbol("_autoClose");const l=Symbol("_close");const c=Symbol("_ended");const u=Symbol("_fd");const d=Symbol("_finished");const f=Symbol("_flags");const p=Symbol("_flush");const m=Symbol("_handleChunk");const y=Symbol("_makeBuf");const b=Symbol("_mode");const _=Symbol("_needDrain");const w=Symbol("_onerror");const g=Symbol("_onopen");const E=Symbol("_onread");const S=Symbol("_onwrite");const R=Symbol("_open");const O=Symbol("_path");const v=Symbol("_pos");const k=Symbol("_queue");const P=Symbol("_read");const M=Symbol("_readSize");const T=Symbol("_reading");const N=Symbol("_remain");const D=Symbol("_size");const A=Symbol("_write");const L=Symbol("_writing");const x=Symbol("_defaultFlag");const I=Symbol("_errored");class ReadStream extends o.Minipass{[I]=false;[u];[O];[M];[T]=false;[D];[N];[h];constructor(e,t){t=t||{};super(t);this.readable=true;this.writable=false;if(typeof e!=="string"){throw new TypeError("path must be a string")}this[I]=false;this[u]=typeof t.fd==="number"?t.fd:undefined;this[O]=e;this[M]=t.readSize||16*1024*1024;this[T]=false;this[D]=typeof t.size==="number"?t.size:Infinity;this[N]=this[D];this[h]=typeof t.autoClose==="boolean"?t.autoClose:true;if(typeof this[u]==="number"){this[P]()}else{this[R]()}}get fd(){return this[u]}get path(){return this[O]}write(){throw new TypeError("this is a readable stream")}end(){throw new TypeError("this is a readable stream")}[R](){r.default.open(this[O],"r",((e,t)=>this[g](e,t)))}[g](e,t){if(e){this[w](e)}else{this[u]=t;this.emit("open",t);this[P]()}}[y](){return Buffer.allocUnsafe(Math.min(this[M],this[N]))}[P](){if(!this[T]){this[T]=true;const e=this[y]();if(e.length===0){return process.nextTick((()=>this[E](null,0,e)))}r.default.read(this[u],e,0,e.length,null,((e,t,i)=>this[E](e,t,i)))}}[E](e,t,i){this[T]=false;if(e){this[w](e)}else if(this[m](t,i)){this[P]()}}[l](){if(this[h]&&typeof this[u]==="number"){const e=this[u];this[u]=undefined;r.default.close(e,(e=>e?this.emit("error",e):this.emit("close")))}}[w](e){this[T]=true;this[l]();this.emit("error",e)}[m](e,t){let i=false;this[N]-=e;if(e>0){i=super.write(e<t.length?t.subarray(0,e):t)}if(e===0||this[N]<=0){i=false;this[l]();super.end()}return i}emit(e,...t){switch(e){case"prefinish":case"finish":return false;case"drain":if(typeof this[u]==="number"){this[P]()}return false;case"error":if(this[I]){return false}this[I]=true;return super.emit(e,...t);default:return super.emit(e,...t)}}}t.ReadStream=ReadStream;class ReadStreamSync extends ReadStream{[R](){let e=true;try{this[g](null,r.default.openSync(this[O],"r"));e=false}finally{if(e){this[l]()}}}[P](){let e=true;try{if(!this[T]){this[T]=true;do{const e=this[y]();const t=e.length===0?0:r.default.readSync(this[u],e,0,e.length,null);if(!this[m](t,e)){break}}while(true);this[T]=false}e=false}finally{if(e){this[l]()}}}[l](){if(this[h]&&typeof this[u]==="number"){const e=this[u];this[u]=undefined;r.default.closeSync(e);this.emit("close")}}}t.ReadStreamSync=ReadStreamSync;class WriteStream extends n.default{readable=false;writable=true;[I]=false;[L]=false;[c]=false;[k]=[];[_]=false;[O];[b];[h];[u];[x];[f];[d]=false;[v];constructor(e,t){t=t||{};super(t);this[O]=e;this[u]=typeof t.fd==="number"?t.fd:undefined;this[b]=t.mode===undefined?438:t.mode;this[v]=typeof t.start==="number"?t.start:undefined;this[h]=typeof t.autoClose==="boolean"?t.autoClose:true;const i=this[v]!==undefined?"r+":"w";this[x]=t.flags===undefined;this[f]=t.flags===undefined?i:t.flags;if(this[u]===undefined){this[R]()}}emit(e,...t){if(e==="error"){if(this[I]){return false}this[I]=true}return super.emit(e,...t)}get fd(){return this[u]}get path(){return this[O]}[w](e){this[l]();this[L]=true;this.emit("error",e)}[R](){r.default.open(this[O],this[f],this[b],((e,t)=>this[g](e,t)))}[g](e,t){if(this[x]&&this[f]==="r+"&&e&&e.code==="ENOENT"){this[f]="w";this[R]()}else if(e){this[w](e)}else{this[u]=t;this.emit("open",t);if(!this[L]){this[p]()}}}end(e,t){if(e){this.write(e,t)}this[c]=true;if(!this[L]&&!this[k].length&&typeof this[u]==="number"){this[S](null,0)}return this}write(e,t){if(typeof e==="string"){e=Buffer.from(e,t)}if(this[c]){this.emit("error",new Error("write() after end()"));return false}if(this[u]===undefined||this[L]||this[k].length){this[k].push(e);this[_]=true;return false}this[L]=true;this[A](e);return true}[A](e){r.default.write(this[u],e,0,e.length,this[v],((e,t)=>this[S](e,t)))}[S](e,t){if(e){this[w](e)}else{if(this[v]!==undefined&&typeof t==="number"){this[v]+=t}if(this[k].length){this[p]()}else{this[L]=false;if(this[c]&&!this[d]){this[d]=true;this[l]();this.emit("finish")}else if(this[_]){this[_]=false;this.emit("drain")}}}}[p](){if(this[k].length===0){if(this[c]){this[S](null,0)}}else if(this[k].length===1){this[A](this[k].pop())}else{const e=this[k];this[k]=[];a(this[u],e,this[v],((e,t)=>this[S](e,t)))}}[l](){if(this[h]&&typeof this[u]==="number"){const e=this[u];this[u]=undefined;r.default.close(e,(e=>e?this.emit("error",e):this.emit("close")))}}}t.WriteStream=WriteStream;class WriteStreamSync extends WriteStream{[R](){let e;if(this[x]&&this[f]==="r+"){try{e=r.default.openSync(this[O],this[f],this[b])}catch(e){if(e?.code==="ENOENT"){this[f]="w";return this[R]()}else{throw e}}}else{e=r.default.openSync(this[O],this[f],this[b])}this[g](null,e)}[l](){if(this[h]&&typeof this[u]==="number"){const e=this[u];this[u]=undefined;r.default.closeSync(e);this.emit("close")}}[A](e){let t=true;try{this[S](null,r.default.writeSync(this[u],e,0,e.length,this[v]));t=false}finally{if(t){try{this[l]()}catch{}}}}}t.WriteStreamSync=WriteStreamSync},7302:function(e,t,i){var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});t.chownrSync=t.chownr=void 0;const n=s(i(7561));const r=s(i(9411));const lchownSync=(e,t,i)=>{try{return n.default.lchownSync(e,t,i)}catch(e){if(e?.code!=="ENOENT")throw e}};const chown=(e,t,i,s)=>{n.default.lchown(e,t,i,(e=>{s(e&&e?.code!=="ENOENT"?e:null)}))};const chownrKid=(e,i,s,n,o)=>{if(i.isDirectory()){(0,t.chownr)(r.default.resolve(e,i.name),s,n,(t=>{if(t)return o(t);const a=r.default.resolve(e,i.name);chown(a,s,n,o)}))}else{const t=r.default.resolve(e,i.name);chown(t,s,n,o)}};const chownr=(e,t,i,s)=>{n.default.readdir(e,{withFileTypes:true},((n,r)=>{if(n){if(n.code==="ENOENT")return s();else if(n.code!=="ENOTDIR"&&n.code!=="ENOTSUP")return s(n)}if(n||!r.length)return chown(e,t,i,s);let o=r.length;let a=null;const then=n=>{if(a)return;if(n)return s(a=n);if(--o===0)return chown(e,t,i,s)};for(const s of r){chownrKid(e,s,t,i,then)}}))};t.chownr=chownr;const chownrKidSync=(e,i,s,n)=>{if(i.isDirectory())(0,t.chownrSync)(r.default.resolve(e,i.name),s,n);lchownSync(r.default.resolve(e,i.name),s,n)};const chownrSync=(e,t,i)=>{let s;try{s=n.default.readdirSync(e,{withFileTypes:true})}catch(s){const n=s;if(n?.code==="ENOENT")return;else if(n?.code==="ENOTDIR"||n?.code==="ENOTSUP")return lchownSync(e,t,i);else throw n}for(const n of s){chownrKidSync(e,n,t,i)}return lchownSync(e,t,i)};t.chownrSync=chownrSync},3993:function(e,t,i){var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});t.Minipass=t.isWritable=t.isReadable=t.isStream=void 0;const n=typeof process==="object"&&process?process:{stdout:null,stderr:null};const r=i(5673);const o=s(i(4492));const a=i(6915);const isStream=e=>!!e&&typeof e==="object"&&(e instanceof Minipass||e instanceof o.default||(0,t.isReadable)(e)||(0,t.isWritable)(e));t.isStream=isStream;const isReadable=e=>!!e&&typeof e==="object"&&e instanceof r.EventEmitter&&typeof e.pipe==="function"&&e.pipe!==o.default.Writable.prototype.pipe;t.isReadable=isReadable;const isWritable=e=>!!e&&typeof e==="object"&&e instanceof r.EventEmitter&&typeof e.write==="function"&&typeof e.end==="function";t.isWritable=isWritable;const h=Symbol("EOF");const l=Symbol("maybeEmitEnd");const c=Symbol("emittedEnd");const u=Symbol("emittingEnd");const d=Symbol("emittedError");const f=Symbol("closed");const p=Symbol("read");const m=Symbol("flush");const y=Symbol("flushChunk");const b=Symbol("encoding");const _=Symbol("decoder");const w=Symbol("flowing");const g=Symbol("paused");const E=Symbol("resume");const S=Symbol("buffer");const R=Symbol("pipes");const O=Symbol("bufferLength");const v=Symbol("bufferPush");const k=Symbol("bufferShift");const P=Symbol("objectMode");const M=Symbol("destroyed");const T=Symbol("error");const N=Symbol("emitData");const D=Symbol("emitEnd");const A=Symbol("emitEnd2");const L=Symbol("async");const x=Symbol("abort");const I=Symbol("aborted");const F=Symbol("signal");const B=Symbol("dataListeners");const C=Symbol("discarded");const defer=e=>Promise.resolve().then(e);const nodefer=e=>e();const isEndish=e=>e==="end"||e==="finish"||e==="prefinish";const isArrayBufferLike=e=>e instanceof ArrayBuffer||!!e&&typeof e==="object"&&e.constructor&&e.constructor.name==="ArrayBuffer"&&e.byteLength>=0;const isArrayBufferView=e=>!Buffer.isBuffer(e)&&ArrayBuffer.isView(e);class Pipe{src;dest;opts;ondrain;constructor(e,t,i){this.src=e;this.dest=t;this.opts=i;this.ondrain=()=>e[E]();this.dest.on("drain",this.ondrain)}unpipe(){this.dest.removeListener("drain",this.ondrain)}proxyErrors(e){}end(){this.unpipe();if(this.opts.end)this.dest.end()}}class PipeProxyErrors extends Pipe{unpipe(){this.src.removeListener("error",this.proxyErrors);super.unpipe()}constructor(e,t,i){super(e,t,i);this.proxyErrors=e=>t.emit("error",e);e.on("error",this.proxyErrors)}}const isObjectModeOptions=e=>!!e.objectMode;const isEncodingOptions=e=>!e.objectMode&&!!e.encoding&&e.encoding!=="buffer";class Minipass extends r.EventEmitter{[w]=false;[g]=false;[R]=[];[S]=[];[P];[b];[L];[_];[h]=false;[c]=false;[u]=false;[f]=false;[d]=null;[O]=0;[M]=false;[F];[I]=false;[B]=0;[C]=false;writable=true;readable=true;constructor(...e){const t=e[0]||{};super();if(t.objectMode&&typeof t.encoding==="string"){throw new TypeError("Encoding and objectMode may not be used together")}if(isObjectModeOptions(t)){this[P]=true;this[b]=null}else if(isEncodingOptions(t)){this[b]=t.encoding;this[P]=false}else{this[P]=false;this[b]=null}this[L]=!!t.async;this[_]=this[b]?new a.StringDecoder(this[b]):null;if(t&&t.debugExposeBuffer===true){Object.defineProperty(this,"buffer",{get:()=>this[S]})}if(t&&t.debugExposePipes===true){Object.defineProperty(this,"pipes",{get:()=>this[R]})}const{signal:i}=t;if(i){this[F]=i;if(i.aborted){this[x]()}else{i.addEventListener("abort",(()=>this[x]()))}}}get bufferLength(){return this[O]}get encoding(){return this[b]}set encoding(e){throw new Error("Encoding must be set at instantiation time")}setEncoding(e){throw new Error("Encoding must be set at instantiation time")}get objectMode(){return this[P]}set objectMode(e){throw new Error("objectMode must be set at instantiation time")}get["async"](){return this[L]}set["async"](e){this[L]=this[L]||!!e}[x](){this[I]=true;this.emit("abort",this[F]?.reason);this.destroy(this[F]?.reason)}get aborted(){return this[I]}set aborted(e){}write(e,t,i){if(this[I])return false;if(this[h])throw new Error("write after end");if(this[M]){this.emit("error",Object.assign(new Error("Cannot call write after a stream was destroyed"),{code:"ERR_STREAM_DESTROYED"}));return true}if(typeof t==="function"){i=t;t="utf8"}if(!t)t="utf8";const s=this[L]?defer:nodefer;if(!this[P]&&!Buffer.isBuffer(e)){if(isArrayBufferView(e)){e=Buffer.from(e.buffer,e.byteOffset,e.byteLength)}else if(isArrayBufferLike(e)){e=Buffer.from(e)}else if(typeof e!=="string"){throw new Error("Non-contiguous data written to non-objectMode stream")}}if(this[P]){if(this[w]&&this[O]!==0)this[m](true);if(this[w])this.emit("data",e);else this[v](e);if(this[O]!==0)this.emit("readable");if(i)s(i);return this[w]}if(!e.length){if(this[O]!==0)this.emit("readable");if(i)s(i);return this[w]}if(typeof e==="string"&&!(t===this[b]&&!this[_]?.lastNeed)){e=Buffer.from(e,t)}if(Buffer.isBuffer(e)&&this[b]){e=this[_].write(e)}if(this[w]&&this[O]!==0)this[m](true);if(this[w])this.emit("data",e);else this[v](e);if(this[O]!==0)this.emit("readable");if(i)s(i);return this[w]}read(e){if(this[M])return null;this[C]=false;if(this[O]===0||e===0||e&&e>this[O]){this[l]();return null}if(this[P])e=null;if(this[S].length>1&&!this[P]){this[S]=[this[b]?this[S].join(""):Buffer.concat(this[S],this[O])]}const t=this[p](e||null,this[S][0]);this[l]();return t}[p](e,t){if(this[P])this[k]();else{const i=t;if(e===i.length||e===null)this[k]();else if(typeof i==="string"){this[S][0]=i.slice(e);t=i.slice(0,e);this[O]-=e}else{this[S][0]=i.subarray(e);t=i.subarray(0,e);this[O]-=e}}this.emit("data",t);if(!this[S].length&&!this[h])this.emit("drain");return t}end(e,t,i){if(typeof e==="function"){i=e;e=undefined}if(typeof t==="function"){i=t;t="utf8"}if(e!==undefined)this.write(e,t);if(i)this.once("end",i);this[h]=true;this.writable=false;if(this[w]||!this[g])this[l]();return this}[E](){if(this[M])return;if(!this[B]&&!this[R].length){this[C]=true}this[g]=false;this[w]=true;this.emit("resume");if(this[S].length)this[m]();else if(this[h])this[l]();else this.emit("drain")}resume(){return this[E]()}pause(){this[w]=false;this[g]=true;this[C]=false}get destroyed(){return this[M]}get flowing(){return this[w]}get paused(){return this[g]}[v](e){if(this[P])this[O]+=1;else this[O]+=e.length;this[S].push(e)}[k](){if(this[P])this[O]-=1;else this[O]-=this[S][0].length;return this[S].shift()}[m](e=false){do{}while(this[y](this[k]())&&this[S].length);if(!e&&!this[S].length&&!this[h])this.emit("drain")}[y](e){this.emit("data",e);return this[w]}pipe(e,t){if(this[M])return e;this[C]=false;const i=this[c];t=t||{};if(e===n.stdout||e===n.stderr)t.end=false;else t.end=t.end!==false;t.proxyErrors=!!t.proxyErrors;if(i){if(t.end)e.end()}else{this[R].push(!t.proxyErrors?new Pipe(this,e,t):new PipeProxyErrors(this,e,t));if(this[L])defer((()=>this[E]()));else this[E]()}return e}unpipe(e){const t=this[R].find((t=>t.dest===e));if(t){if(this[R].length===1){if(this[w]&&this[B]===0){this[w]=false}this[R]=[]}else this[R].splice(this[R].indexOf(t),1);t.unpipe()}}addListener(e,t){return this.on(e,t)}on(e,t){const i=super.on(e,t);if(e==="data"){this[C]=false;this[B]++;if(!this[R].length&&!this[w]){this[E]()}}else if(e==="readable"&&this[O]!==0){super.emit("readable")}else if(isEndish(e)&&this[c]){super.emit(e);this.removeAllListeners(e)}else if(e==="error"&&this[d]){const e=t;if(this[L])defer((()=>e.call(this,this[d])));else e.call(this,this[d])}return i}removeListener(e,t){return this.off(e,t)}off(e,t){const i=super.off(e,t);if(e==="data"){this[B]=this.listeners("data").length;if(this[B]===0&&!this[C]&&!this[R].length){this[w]=false}}return i}removeAllListeners(e){const t=super.removeAllListeners(e);if(e==="data"||e===undefined){this[B]=0;if(!this[C]&&!this[R].length){this[w]=false}}return t}get emittedEnd(){return this[c]}[l](){if(!this[u]&&!this[c]&&!this[M]&&this[S].length===0&&this[h]){this[u]=true;this.emit("end");this.emit("prefinish");this.emit("finish");if(this[f])this.emit("close");this[u]=false}}emit(e,...t){const i=t[0];if(e!=="error"&&e!=="close"&&e!==M&&this[M]){return false}else if(e==="data"){return!this[P]&&!i?false:this[L]?(defer((()=>this[N](i))),true):this[N](i)}else if(e==="end"){return this[D]()}else if(e==="close"){this[f]=true;if(!this[c]&&!this[M])return false;const e=super.emit("close");this.removeAllListeners("close");return e}else if(e==="error"){this[d]=i;super.emit(T,i);const e=!this[F]||this.listeners("error").length?super.emit("error",i):false;this[l]();return e}else if(e==="resume"){const e=super.emit("resume");this[l]();return e}else if(e==="finish"||e==="prefinish"){const t=super.emit(e);this.removeAllListeners(e);return t}const s=super.emit(e,...t);this[l]();return s}[N](e){for(const t of this[R]){if(t.dest.write(e)===false)this.pause()}const t=this[C]?false:super.emit("data",e);this[l]();return t}[D](){if(this[c])return false;this[c]=true;this.readable=false;return this[L]?(defer((()=>this[A]())),true):this[A]()}[A](){if(this[_]){const e=this[_].end();if(e){for(const t of this[R]){t.dest.write(e)}if(!this[C])super.emit("data",e)}}for(const e of this[R]){e.end()}const e=super.emit("end");this.removeAllListeners("end");return e}async collect(){const e=Object.assign([],{dataLength:0});if(!this[P])e.dataLength=0;const t=this.promise();this.on("data",(t=>{e.push(t);if(!this[P])e.dataLength+=t.length}));await t;return e}async concat(){if(this[P]){throw new Error("cannot concat in objectMode")}const e=await this.collect();return this[b]?e.join(""):Buffer.concat(e,e.dataLength)}async promise(){return new Promise(((e,t)=>{this.on(M,(()=>t(new Error("stream destroyed"))));this.on("error",(e=>t(e)));this.on("end",(()=>e()))}))}[Symbol.asyncIterator](){this[C]=false;let e=false;const stop=async()=>{this.pause();e=true;return{value:undefined,done:true}};const next=()=>{if(e)return stop();const t=this.read();if(t!==null)return Promise.resolve({done:false,value:t});if(this[h])return stop();let i;let s;const onerr=e=>{this.off("data",ondata);this.off("end",onend);this.off(M,ondestroy);stop();s(e)};const ondata=e=>{this.off("error",onerr);this.off("end",onend);this.off(M,ondestroy);this.pause();i({value:e,done:!!this[h]})};const onend=()=>{this.off("error",onerr);this.off("data",ondata);this.off(M,ondestroy);stop();i({done:true,value:undefined})};const ondestroy=()=>onerr(new Error("stream destroyed"));return new Promise(((e,t)=>{s=t;i=e;this.once(M,ondestroy);this.once("error",onerr);this.once("end",onend);this.once("data",ondata)}))};return{next:next,throw:stop,return:stop,[Symbol.asyncIterator](){return this}}}[Symbol.iterator](){this[C]=false;let e=false;const stop=()=>{this.pause();this.off(T,stop);this.off(M,stop);this.off("end",stop);e=true;return{done:true,value:undefined}};const next=()=>{if(e)return stop();const t=this.read();return t===null?stop():{done:false,value:t}};this.once("end",stop);this.once(T,stop);this.once(M,stop);return{next:next,throw:stop,return:stop,[Symbol.iterator](){return this}}}destroy(e){if(this[M]){if(e)this.emit("error",e);else this.emit(M);return this}this[M]=true;this[C]=true;this[S].length=0;this[O]=0;const t=this;if(typeof t.close==="function"&&!this[f])t.close();if(e)this.emit("error",e);else this.emit(M);return this}static get isStream(){return t.isStream}}t.Minipass=Minipass},5636:function(e,t,i){var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});t.constants=void 0;const n=s(i(9796));const r=n.default.constants||{ZLIB_VERNUM:4736};t.constants=Object.freeze(Object.assign(Object.create(null),{Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_VERSION_ERROR:-6,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,DEFLATE:1,INFLATE:2,GZIP:3,GUNZIP:4,DEFLATERAW:5,INFLATERAW:6,UNZIP:7,BROTLI_DECODE:8,BROTLI_ENCODE:9,Z_MIN_WINDOWBITS:8,Z_MAX_WINDOWBITS:15,Z_DEFAULT_WINDOWBITS:15,Z_MIN_CHUNK:64,Z_MAX_CHUNK:Infinity,Z_DEFAULT_CHUNK:16384,Z_MIN_MEMLEVEL:1,Z_MAX_MEMLEVEL:9,Z_DEFAULT_MEMLEVEL:8,Z_MIN_LEVEL:-1,Z_MAX_LEVEL:9,Z_DEFAULT_LEVEL:-1,BROTLI_OPERATION_PROCESS:0,BROTLI_OPERATION_FLUSH:1,BROTLI_OPERATION_FINISH:2,BROTLI_OPERATION_EMIT_METADATA:3,BROTLI_MODE_GENERIC:0,BROTLI_MODE_TEXT:1,BROTLI_MODE_FONT:2,BROTLI_DEFAULT_MODE:0,BROTLI_MIN_QUALITY:0,BROTLI_MAX_QUALITY:11,BROTLI_DEFAULT_QUALITY:11,BROTLI_MIN_WINDOW_BITS:10,BROTLI_MAX_WINDOW_BITS:24,BROTLI_LARGE_MAX_WINDOW_BITS:30,BROTLI_DEFAULT_WINDOW:22,BROTLI_MIN_INPUT_BLOCK_BITS:16,BROTLI_MAX_INPUT_BLOCK_BITS:24,BROTLI_PARAM_MODE:0,BROTLI_PARAM_QUALITY:1,BROTLI_PARAM_LGWIN:2,BROTLI_PARAM_LGBLOCK:3,BROTLI_PARAM_DISABLE_LITERAL_CONTEXT_MODELING:4,BROTLI_PARAM_SIZE_HINT:5,BROTLI_PARAM_LARGE_WINDOW:6,BROTLI_PARAM_NPOSTFIX:7,BROTLI_PARAM_NDIRECT:8,BROTLI_DECODER_RESULT_ERROR:0,BROTLI_DECODER_RESULT_SUCCESS:1,BROTLI_DECODER_RESULT_NEEDS_MORE_INPUT:2,BROTLI_DECODER_RESULT_NEEDS_MORE_OUTPUT:3,BROTLI_DECODER_PARAM_DISABLE_RING_BUFFER_REALLOCATION:0,BROTLI_DECODER_PARAM_LARGE_WINDOW:1,BROTLI_DECODER_NO_ERROR:0,BROTLI_DECODER_SUCCESS:1,BROTLI_DECODER_NEEDS_MORE_INPUT:2,BROTLI_DECODER_NEEDS_MORE_OUTPUT:3,BROTLI_DECODER_ERROR_FORMAT_EXUBERANT_NIBBLE:-1,BROTLI_DECODER_ERROR_FORMAT_RESERVED:-2,BROTLI_DECODER_ERROR_FORMAT_EXUBERANT_META_NIBBLE:-3,BROTLI_DECODER_ERROR_FORMAT_SIMPLE_HUFFMAN_ALPHABET:-4,BROTLI_DECODER_ERROR_FORMAT_SIMPLE_HUFFMAN_SAME:-5,BROTLI_DECODER_ERROR_FORMAT_CL_SPACE:-6,BROTLI_DECODER_ERROR_FORMAT_HUFFMAN_SPACE:-7,BROTLI_DECODER_ERROR_FORMAT_CONTEXT_MAP_REPEAT:-8,BROTLI_DECODER_ERROR_FORMAT_BLOCK_LENGTH_1:-9,BROTLI_DECODER_ERROR_FORMAT_BLOCK_LENGTH_2:-10,BROTLI_DECODER_ERROR_FORMAT_TRANSFORM:-11,BROTLI_DECODER_ERROR_FORMAT_DICTIONARY:-12,BROTLI_DECODER_ERROR_FORMAT_WINDOW_BITS:-13,BROTLI_DECODER_ERROR_FORMAT_PADDING_1:-14,BROTLI_DECODER_ERROR_FORMAT_PADDING_2:-15,BROTLI_DECODER_ERROR_FORMAT_DISTANCE:-16,BROTLI_DECODER_ERROR_DICTIONARY_NOT_SET:-19,BROTLI_DECODER_ERROR_INVALID_ARGUMENTS:-20,BROTLI_DECODER_ERROR_ALLOC_CONTEXT_MODES:-21,BROTLI_DECODER_ERROR_ALLOC_TREE_GROUPS:-22,BROTLI_DECODER_ERROR_ALLOC_CONTEXT_MAP:-25,BROTLI_DECODER_ERROR_ALLOC_RING_BUFFER_1:-26,BROTLI_DECODER_ERROR_ALLOC_RING_BUFFER_2:-27,BROTLI_DECODER_ERROR_ALLOC_BLOCK_TYPE_TREES:-30,BROTLI_DECODER_ERROR_UNREACHABLE:-31},r))},6890:function(e,t,i){var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});t.BrotliDecompress=t.BrotliCompress=t.Brotli=t.Unzip=t.InflateRaw=t.DeflateRaw=t.Gunzip=t.Gzip=t.Inflate=t.Deflate=t.Zlib=t.ZlibError=t.constants=void 0;const n=s(i(9491));const r=i(4300);const o=i(3993);const a=s(i(9796));const h=i(5636);var l=i(5636);Object.defineProperty(t,"constants",{enumerable:true,get:function(){return l.constants}});const c=r.Buffer.concat;const u=Symbol("_superWrite");class ZlibError extends Error{code;errno;constructor(e){super("zlib: "+e.message);this.code=e.code;this.errno=e.errno;if(!this.code)this.code="ZLIB_ERROR";this.message="zlib: "+e.message;Error.captureStackTrace(this,this.constructor)}get name(){return"ZlibError"}}t.ZlibError=ZlibError;const d=Symbol("flushFlag");class ZlibBase extends o.Minipass{#e=false;#t=false;#i;#s;#n;#r;#o;get sawError(){return this.#e}get handle(){return this.#r}get flushFlag(){return this.#i}constructor(e,t){if(!e||typeof e!=="object")throw new TypeError("invalid options for ZlibBase constructor");super(e);this.#i=e.flush??0;this.#s=e.finishFlush??0;this.#n=e.fullFlushFlag??0;try{this.#r=new a.default[t](e)}catch(e){throw new ZlibError(e)}this.#o=e=>{if(this.#e)return;this.#e=true;this.close();this.emit("error",e)};this.#r?.on("error",(e=>this.#o(new ZlibError(e))));this.once("end",(()=>this.close))}close(){if(this.#r){this.#r.close();this.#r=undefined;this.emit("close")}}reset(){if(!this.#e){(0,n.default)(this.#r,"zlib binding closed");return this.#r.reset?.()}}flush(e){if(this.ended)return;if(typeof e!=="number")e=this.#n;this.write(Object.assign(r.Buffer.alloc(0),{[d]:e}))}end(e,t,i){if(typeof e==="function"){i=e;t=undefined;e=undefined}if(typeof t==="function"){i=t;t=undefined}if(e){if(t)this.write(e,t);else this.write(e)}this.flush(this.#s);this.#t=true;return super.end(i)}get ended(){return this.#t}[u](e){return super.write(e)}write(e,t,i){if(typeof t==="function")i=t,t="utf8";if(typeof e==="string")e=r.Buffer.from(e,t);if(this.#e)return;(0,n.default)(this.#r,"zlib binding closed");const s=this.#r._handle;const o=s.close;s.close=()=>{};const a=this.#r.close;this.#r.close=()=>{};r.Buffer.concat=e=>e;let h=undefined;try{const t=typeof e[d]==="number"?e[d]:this.#i;h=this.#r._processChunk(e,t);r.Buffer.concat=c}catch(e){r.Buffer.concat=c;this.#o(new ZlibError(e))}finally{if(this.#r){this.#r._handle=s;s.close=o;this.#r.close=a;this.#r.removeAllListeners("error")}}if(this.#r)this.#r.on("error",(e=>this.#o(new ZlibError(e))));let l;if(h){if(Array.isArray(h)&&h.length>0){const e=h[0];l=this[u](r.Buffer.from(e));for(let e=1;e<h.length;e++){l=this[u](h[e])}}else{l=this[u](r.Buffer.from(h))}}if(i)i();return l}}class Zlib extends ZlibBase{#a;#h;constructor(e,t){e=e||{};e.flush=e.flush||h.constants.Z_NO_FLUSH;e.finishFlush=e.finishFlush||h.constants.Z_FINISH;e.fullFlushFlag=h.constants.Z_FULL_FLUSH;super(e,t);this.#a=e.level;this.#h=e.strategy}params(e,t){if(this.sawError)return;if(!this.handle)throw new Error("cannot switch params when binding is closed");if(!this.handle.params)throw new Error("not supported in this implementation");if(this.#a!==e||this.#h!==t){this.flush(h.constants.Z_SYNC_FLUSH);(0,n.default)(this.handle,"zlib binding closed");const i=this.handle.flush;this.handle.flush=(e,t)=>{if(typeof e==="function"){t=e;e=this.flushFlag}this.flush(e);t?.()};try{this.handle.params(e,t)}finally{this.handle.flush=i}if(this.handle){this.#a=e;this.#h=t}}}}t.Zlib=Zlib;class Deflate extends Zlib{constructor(e){super(e,"Deflate")}}t.Deflate=Deflate;class Inflate extends Zlib{constructor(e){super(e,"Inflate")}}t.Inflate=Inflate;class Gzip extends Zlib{#l;constructor(e){super(e,"Gzip");this.#l=e&&!!e.portable}[u](e){if(!this.#l)return super[u](e);this.#l=false;e[9]=255;return super[u](e)}}t.Gzip=Gzip;class Gunzip extends Zlib{constructor(e){super(e,"Gunzip")}}t.Gunzip=Gunzip;class DeflateRaw extends Zlib{constructor(e){super(e,"DeflateRaw")}}t.DeflateRaw=DeflateRaw;class InflateRaw extends Zlib{constructor(e){super(e,"InflateRaw")}}t.InflateRaw=InflateRaw;class Unzip extends Zlib{constructor(e){super(e,"Unzip")}}t.Unzip=Unzip;class Brotli extends ZlibBase{constructor(e,t){e=e||{};e.flush=e.flush||h.constants.BROTLI_OPERATION_PROCESS;e.finishFlush=e.finishFlush||h.constants.BROTLI_OPERATION_FINISH;e.fullFlushFlag=h.constants.BROTLI_OPERATION_FLUSH;super(e,t)}}t.Brotli=Brotli;class BrotliCompress extends Brotli{constructor(e){super(e,"BrotliCompress")}}t.BrotliCompress=BrotliCompress;class BrotliDecompress extends Brotli{constructor(e){super(e,"BrotliDecompress")}}t.BrotliDecompress=BrotliDecompress},6359:function(e,t,i){var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});t.create=void 0;const n=i(9561);const r=s(i(9411));const o=i(8204);const a=i(121);const h=i(5970);const createFileSync=(e,t)=>{const i=new h.PackSync(e);const s=new n.WriteStreamSync(e.file,{mode:e.mode||438});i.pipe(s);addFilesSync(i,t)};const createFile=(e,t)=>{const i=new h.Pack(e);const s=new n.WriteStream(e.file,{mode:e.mode||438});i.pipe(s);const r=new Promise(((e,t)=>{s.on("error",t);s.on("close",e);i.on("error",t)}));addFilesAsync(i,t);return r};const addFilesSync=(e,t)=>{t.forEach((t=>{if(t.charAt(0)==="@"){(0,o.list)({file:r.default.resolve(e.cwd,t.slice(1)),sync:true,noResume:true,onReadEntry:t=>e.add(t)})}else{e.add(t)}}));e.end()};const addFilesAsync=async(e,t)=>{for(let i=0;i<t.length;i++){const s=String(t[i]);if(s.charAt(0)==="@"){await(0,o.list)({file:r.default.resolve(String(e.cwd),s.slice(1)),noResume:true,onReadEntry:t=>{e.add(t)}})}else{e.add(s)}}e.end()};const createSync=(e,t)=>{const i=new h.PackSync(e);addFilesSync(i,t);return i};const createAsync=(e,t)=>{const i=new h.Pack(e);addFilesAsync(i,t);return i};t.create=(0,a.makeCommand)(createFileSync,createFile,createSync,createAsync,((e,t)=>{if(!t?.length){throw new TypeError("no paths specified to add to archive")}}))},3765:(e,t)=>{Object.defineProperty(t,"__esModule",{value:true});t.CwdError=void 0;class CwdError extends Error{path;code;syscall="chdir";constructor(e,t){super(`${t}: Cannot cd into '${e}'`);this.path=e;this.code=t}get name(){return"CwdError"}}t.CwdError=CwdError},9968:function(e,t,i){var s=this&&this.__createBinding||(Object.create?function(e,t,i,s){if(s===undefined)s=i;var n=Object.getOwnPropertyDescriptor(t,i);if(!n||("get"in n?!t.__esModule:n.writable||n.configurable)){n={enumerable:true,get:function(){return t[i]}}}Object.defineProperty(e,s,n)}:function(e,t,i,s){if(s===undefined)s=i;e[s]=t[i]});var n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var i in e)if(i!=="default"&&Object.prototype.hasOwnProperty.call(e,i))s(t,e,i);n(t,e);return t};var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});t.extract=void 0;const a=r(i(9561));const h=o(i(7561));const l=i(8204);const c=i(121);const u=i(8029);const extractFileSync=e=>{const t=new u.UnpackSync(e);const i=e.file;const s=h.default.statSync(i);const n=e.maxReadSize||16*1024*1024;const r=new a.ReadStreamSync(i,{readSize:n,size:s.size});r.pipe(t)};const extractFile=(e,t)=>{const i=new u.Unpack(e);const s=e.maxReadSize||16*1024*1024;const n=e.file;const r=new Promise(((e,t)=>{i.on("error",t);i.on("close",e);h.default.stat(n,((e,r)=>{if(e){t(e)}else{const e=new a.ReadStream(n,{readSize:s,size:r.size});e.on("error",t);e.pipe(i)}}))}));return r};t.extract=(0,c.makeCommand)(extractFileSync,extractFile,(e=>new u.UnpackSync(e)),(e=>new u.Unpack(e)),((e,t)=>{if(t?.length)(0,l.filesFilter)(e,t)}))},9532:function(e,t,i){var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});t.getWriteFlag=void 0;const n=s(i(7147));const r=process.env.__FAKE_PLATFORM__||process.platform;const o=r==="win32";const{O_CREAT:a,O_TRUNC:h,O_WRONLY:l}=n.default.constants;const c=Number(process.env.__FAKE_FS_O_FILENAME__)||n.default.constants.UV_FS_O_FILEMAP||0;const u=o&&!!c;const d=512*1024;const f=c|h|a|l;t.getWriteFlag=!u?()=>"w":e=>e<d?f:"w"},9297:function(e,t,i){var s=this&&this.__createBinding||(Object.create?function(e,t,i,s){if(s===undefined)s=i;var n=Object.getOwnPropertyDescriptor(t,i);if(!n||("get"in n?!t.__esModule:n.writable||n.configurable)){n={enumerable:true,get:function(){return t[i]}}}Object.defineProperty(e,s,n)}:function(e,t,i,s){if(s===undefined)s=i;e[s]=t[i]});var n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var i in e)if(i!=="default"&&Object.prototype.hasOwnProperty.call(e,i))s(t,e,i);n(t,e);return t};Object.defineProperty(t,"__esModule",{value:true});t.Header=void 0;const o=i(9411);const a=r(i(7405));const h=r(i(7398));class Header{cksumValid=false;needPax=false;nullBlock=false;block;path;mode;uid;gid;size;cksum;#c="Unsupported";linkpath;uname;gname;devmaj=0;devmin=0;atime;ctime;mtime;charset;comment;constructor(e,t=0,i,s){if(Buffer.isBuffer(e)){this.decode(e,t||0,i,s)}else if(e){this.#u(e)}}decode(e,t,i,s){if(!t){t=0}if(!e||!(e.length>=t+512)){throw new Error("need 512 bytes for header")}this.path=decString(e,t,100);this.mode=decNumber(e,t+100,8);this.uid=decNumber(e,t+108,8);this.gid=decNumber(e,t+116,8);this.size=decNumber(e,t+124,12);this.mtime=decDate(e,t+136,12);this.cksum=decNumber(e,t+148,12);if(s)this.#u(s,true);if(i)this.#u(i);const n=decString(e,t+156,1);if(h.isCode(n)){this.#c=n||"0"}if(this.#c==="0"&&this.path.slice(-1)==="/"){this.#c="5"}if(this.#c==="5"){this.size=0}this.linkpath=decString(e,t+157,100);if(e.subarray(t+257,t+265).toString()==="ustar\x0000"){this.uname=decString(e,t+265,32);this.gname=decString(e,t+297,32);this.devmaj=decNumber(e,t+329,8)??0;this.devmin=decNumber(e,t+337,8)??0;if(e[t+475]!==0){const i=decString(e,t+345,155);this.path=i+"/"+this.path}else{const i=decString(e,t+345,130);if(i){this.path=i+"/"+this.path}this.atime=decDate(e,t+476,12);this.ctime=decDate(e,t+488,12)}}let r=8*32;for(let i=t;i<t+148;i++){r+=e[i]}for(let i=t+156;i<t+512;i++){r+=e[i]}this.cksumValid=r===this.cksum;if(this.cksum===undefined&&r===8*32){this.nullBlock=true}}#u(e,t=false){Object.assign(this,Object.fromEntries(Object.entries(e).filter((([e,i])=>!(i===null||i===undefined||e==="path"&&t||e==="linkpath"&&t||e==="global")))))}encode(e,t=0){if(!e){e=this.block=Buffer.alloc(512)}if(this.#c==="Unsupported"){this.#c="0"}if(!(e.length>=t+512)){throw new Error("need 512 bytes for header")}const i=this.ctime||this.atime?130:155;const s=splitPrefix(this.path||"",i);const n=s[0];const r=s[1];this.needPax=!!s[2];this.needPax=encString(e,t,100,n)||this.needPax;this.needPax=encNumber(e,t+100,8,this.mode)||this.needPax;this.needPax=encNumber(e,t+108,8,this.uid)||this.needPax;this.needPax=encNumber(e,t+116,8,this.gid)||this.needPax;this.needPax=encNumber(e,t+124,12,this.size)||this.needPax;this.needPax=encDate(e,t+136,12,this.mtime)||this.needPax;e[t+156]=this.#c.charCodeAt(0);this.needPax=encString(e,t+157,100,this.linkpath)||this.needPax;e.write("ustar\x0000",t+257,8);this.needPax=encString(e,t+265,32,this.uname)||this.needPax;this.needPax=encString(e,t+297,32,this.gname)||this.needPax;this.needPax=encNumber(e,t+329,8,this.devmaj)||this.needPax;this.needPax=encNumber(e,t+337,8,this.devmin)||this.needPax;this.needPax=encString(e,t+345,i,r)||this.needPax;if(e[t+475]!==0){this.needPax=encString(e,t+345,155,r)||this.needPax}else{this.needPax=encString(e,t+345,130,r)||this.needPax;this.needPax=encDate(e,t+476,12,this.atime)||this.needPax;this.needPax=encDate(e,t+488,12,this.ctime)||this.needPax}let o=8*32;for(let i=t;i<t+148;i++){o+=e[i]}for(let i=t+156;i<t+512;i++){o+=e[i]}this.cksum=o;encNumber(e,t+148,8,this.cksum);this.cksumValid=true;return this.needPax}get type(){return this.#c==="Unsupported"?this.#c:h.name.get(this.#c)}get typeKey(){return this.#c}set type(e){const t=String(h.code.get(e));if(h.isCode(t)||t==="Unsupported"){this.#c=t}else if(h.isCode(e)){this.#c=e}else{throw new TypeError("invalid entry type: "+e)}}}t.Header=Header;const splitPrefix=(e,t)=>{const i=100;let s=e;let n="";let r=undefined;const a=o.posix.parse(e).root||".";if(Buffer.byteLength(s)<i){r=[s,n,false]}else{n=o.posix.dirname(s);s=o.posix.basename(s);do{if(Buffer.byteLength(s)<=i&&Buffer.byteLength(n)<=t){r=[s,n,false]}else if(Buffer.byteLength(s)>i&&Buffer.byteLength(n)<=t){r=[s.slice(0,i-1),n,true]}else{s=o.posix.join(o.posix.basename(n),s);n=o.posix.dirname(n)}}while(n!==a&&r===undefined);if(!r){r=[e.slice(0,i-1),"",true]}}return r};const decString=(e,t,i)=>e.subarray(t,t+i).toString("utf8").replace(/\0.*/,"");const decDate=(e,t,i)=>numToDate(decNumber(e,t,i));const numToDate=e=>e===undefined?undefined:new Date(e*1e3);const decNumber=(e,t,i)=>Number(e[t])&128?a.parse(e.subarray(t,t+i)):decSmallNumber(e,t,i);const nanUndef=e=>isNaN(e)?undefined:e;const decSmallNumber=(e,t,i)=>nanUndef(parseInt(e.subarray(t,t+i).toString("utf8").replace(/\0.*$/,"").trim(),8));const l={12:8589934591,8:2097151};const encNumber=(e,t,i,s)=>s===undefined?false:s>l[i]||s<0?(a.encode(s,e.subarray(t,t+i)),true):(encSmallNumber(e,t,i,s),false);const encSmallNumber=(e,t,i,s)=>e.write(octalString(s,i),t,i,"ascii");const octalString=(e,t)=>padOctal(Math.floor(e).toString(8),t);const padOctal=(e,t)=>(e.length===t-1?e:new Array(t-e.length-1).join("0")+e+" ")+"\0";const encDate=(e,t,i,s)=>s===undefined?false:encNumber(e,t,i,s.getTime()/1e3);const c=new Array(156).join("\0");const encString=(e,t,i,s)=>s===undefined?false:(e.write(s+c,t,i,"utf8"),s.length!==Buffer.byteLength(s)||s.length>i)},1122:function(e,t,i){var s=this&&this.__createBinding||(Object.create?function(e,t,i,s){if(s===undefined)s=i;var n=Object.getOwnPropertyDescriptor(t,i);if(!n||("get"in n?!t.__esModule:n.writable||n.configurable)){n={enumerable:true,get:function(){return t[i]}}}Object.defineProperty(e,s,n)}:function(e,t,i,s){if(s===undefined)s=i;e[s]=t[i]});var n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var r=this&&this.__exportStar||function(e,t){for(var i in e)if(i!=="default"&&!Object.prototype.hasOwnProperty.call(t,i))s(t,e,i)};var o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var i in e)if(i!=="default"&&Object.prototype.hasOwnProperty.call(e,i))s(t,e,i);n(t,e);return t};Object.defineProperty(t,"__esModule",{value:true});t.u=t.types=t.r=t.t=t.x=t.c=void 0;r(i(6359),t);var a=i(6359);Object.defineProperty(t,"c",{enumerable:true,get:function(){return a.create}});r(i(9968),t);var h=i(9968);Object.defineProperty(t,"x",{enumerable:true,get:function(){return h.extract}});r(i(9297),t);r(i(8204),t);var l=i(8204);Object.defineProperty(t,"t",{enumerable:true,get:function(){return l.list}});r(i(5970),t);r(i(9022),t);r(i(143),t);r(i(8738),t);r(i(653),t);var c=i(653);Object.defineProperty(t,"r",{enumerable:true,get:function(){return c.replace}});t.types=o(i(7398));r(i(8029),t);r(i(3026),t);var u=i(3026);Object.defineProperty(t,"u",{enumerable:true,get:function(){return u.update}});r(i(7304),t)},7405:(e,t)=>{Object.defineProperty(t,"__esModule",{value:true});t.parse=t.encode=void 0;const encode=(e,t)=>{if(!Number.isSafeInteger(e)){throw Error("cannot encode number outside of javascript safe integer range")}else if(e<0){encodeNegative(e,t)}else{encodePositive(e,t)}return t};t.encode=encode;const encodePositive=(e,t)=>{t[0]=128;for(var i=t.length;i>1;i--){t[i-1]=e&255;e=Math.floor(e/256)}};const encodeNegative=(e,t)=>{t[0]=255;var i=false;e=e*-1;for(var s=t.length;s>1;s--){var n=e&255;e=Math.floor(e/256);if(i){t[s-1]=onesComp(n)}else if(n===0){t[s-1]=0}else{i=true;t[s-1]=twosComp(n)}}};const parse=e=>{const t=e[0];const i=t===128?pos(e.subarray(1,e.length)):t===255?twos(e):null;if(i===null){throw Error("invalid base256 encoding")}if(!Number.isSafeInteger(i)){throw Error("parsed number outside of javascript safe integer range")}return i};t.parse=parse;const twos=e=>{var t=e.length;var i=0;var s=false;for(var n=t-1;n>-1;n--){var r=Number(e[n]);var o;if(s){o=onesComp(r)}else if(r===0){o=r}else{s=true;o=twosComp(r)}if(o!==0){i-=o*Math.pow(256,t-n-1)}}return i};const pos=e=>{var t=e.length;var i=0;for(var s=t-1;s>-1;s--){var n=Number(e[s]);if(n!==0){i+=n*Math.pow(256,t-s-1)}}return i};const onesComp=e=>(255^e)&255;const twosComp=e=>(255^e)+1&255},8204:function(e,t,i){var s=this&&this.__createBinding||(Object.create?function(e,t,i,s){if(s===undefined)s=i;var n=Object.getOwnPropertyDescriptor(t,i);if(!n||("get"in n?!t.__esModule:n.writable||n.configurable)){n={enumerable:true,get:function(){return t[i]}}}Object.defineProperty(e,s,n)}:function(e,t,i,s){if(s===undefined)s=i;e[s]=t[i]});var n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var i in e)if(i!=="default"&&Object.prototype.hasOwnProperty.call(e,i))s(t,e,i);n(t,e);return t};var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});t.list=t.filesFilter=void 0;const a=r(i(9561));const h=o(i(7561));const l=i(1017);const c=i(121);const u=i(9022);const d=i(7519);const onReadEntryFunction=e=>{const t=e.onReadEntry;e.onReadEntry=t?e=>{t(e);e.resume()}:e=>e.resume()};const filesFilter=(e,t)=>{const i=new Map(t.map((e=>[(0,d.stripTrailingSlashes)(e),true])));const s=e.filter;const mapHas=(e,t="")=>{const s=t||(0,l.parse)(e).root||".";let n;if(e===s)n=false;else{const t=i.get(e);if(t!==undefined){n=t}else{n=mapHas((0,l.dirname)(e),s)}}i.set(e,n);return n};e.filter=s?(e,t)=>s(e,t)&&mapHas((0,d.stripTrailingSlashes)(e)):e=>mapHas((0,d.stripTrailingSlashes)(e))};t.filesFilter=filesFilter;const listFileSync=e=>{const t=new u.Parser(e);const i=e.file;let s;try{const n=h.default.statSync(i);const r=e.maxReadSize||16*1024*1024;if(n.size<r){t.end(h.default.readFileSync(i))}else{let e=0;const o=Buffer.allocUnsafe(r);s=h.default.openSync(i,"r");while(e<n.size){const i=h.default.readSync(s,o,0,r,e);e+=i;t.write(o.subarray(0,i))}t.end()}}finally{if(typeof s==="number"){try{h.default.closeSync(s)}catch(e){}}}};const listFile=(e,t)=>{const i=new u.Parser(e);const s=e.maxReadSize||16*1024*1024;const n=e.file;const r=new Promise(((e,t)=>{i.on("error",t);i.on("end",e);h.default.stat(n,((e,r)=>{if(e){t(e)}else{const e=new a.ReadStream(n,{readSize:s,size:r.size});e.on("error",t);e.pipe(i)}}))}));return r};t.list=(0,c.makeCommand)(listFileSync,listFile,(e=>new u.Parser(e)),(e=>new u.Parser(e)),((e,i)=>{if(i?.length)(0,t.filesFilter)(e,i);if(!e.noResume)onReadEntryFunction(e)}))},121:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:true});t.makeCommand=void 0;const s=i(8514);const makeCommand=(e,t,i,n,r)=>Object.assign(((o=[],a,h)=>{if(Array.isArray(o)){a=o;o={}}if(typeof a==="function"){h=a;a=undefined}if(!a){a=[]}else{a=Array.from(a)}const l=(0,s.dealias)(o);r?.(l,a);if((0,s.isSyncFile)(l)){if(typeof h==="function"){throw new TypeError("callback not supported for sync tar functions")}return e(l,a)}else if((0,s.isAsyncFile)(l)){const e=t(l,a);const i=h?h:undefined;return i?e.then((()=>i()),i):e}else if((0,s.isSyncNoFile)(l)){if(typeof h==="function"){throw new TypeError("callback not supported for sync tar functions")}return i(l,a)}else if((0,s.isAsyncNoFile)(l)){if(typeof h==="function"){throw new TypeError("callback only supported with file option")}return n(l,a)}else{throw new Error("impossible options??")}}),{syncFile:e,asyncFile:t,syncNoFile:i,asyncNoFile:n,validate:r});t.makeCommand=makeCommand},714:function(e,t,i){var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});t.mkdirSync=t.mkdir=void 0;const n=i(7302);const r=s(i(7147));const o=i(6489);const a=s(i(9411));const h=i(3765);const l=i(1555);const c=i(2253);const cGet=(e,t)=>e.get((0,l.normalizeWindowsPath)(t));const cSet=(e,t,i)=>e.set((0,l.normalizeWindowsPath)(t),i);const checkCwd=(e,t)=>{r.default.stat(e,((i,s)=>{if(i||!s.isDirectory()){i=new h.CwdError(e,i?.code||"ENOTDIR")}t(i)}))};const mkdir=(e,t,i)=>{e=(0,l.normalizeWindowsPath)(e);const s=t.umask??18;const h=t.mode|448;const c=(h&s)!==0;const u=t.uid;const d=t.gid;const f=typeof u==="number"&&typeof d==="number"&&(u!==t.processUid||d!==t.processGid);const p=t.preserve;const m=t.unlink;const y=t.cache;const b=(0,l.normalizeWindowsPath)(t.cwd);const done=(t,s)=>{if(t){i(t)}else{cSet(y,e,true);if(s&&f){(0,n.chownr)(s,u,d,(e=>done(e)))}else if(c){r.default.chmod(e,h,i)}else{i()}}};if(y&&cGet(y,e)===true){return done()}if(e===b){return checkCwd(e,done)}if(p){return(0,o.mkdirp)(e,{mode:h}).then((e=>done(null,e??undefined)),done)}const _=(0,l.normalizeWindowsPath)(a.default.relative(b,e));const w=_.split("/");mkdir_(b,w,h,y,m,b,undefined,done)};t.mkdir=mkdir;const mkdir_=(e,t,i,s,n,o,h,c)=>{if(!t.length){return c(null,h)}const u=t.shift();const d=(0,l.normalizeWindowsPath)(a.default.resolve(e+"/"+u));if(cGet(s,d)){return mkdir_(d,t,i,s,n,o,h,c)}r.default.mkdir(d,i,onmkdir(d,t,i,s,n,o,h,c))};const onmkdir=(e,t,i,s,n,o,a,h)=>u=>{if(u){r.default.lstat(e,((d,f)=>{if(d){d.path=d.path&&(0,l.normalizeWindowsPath)(d.path);h(d)}else if(f.isDirectory()){mkdir_(e,t,i,s,n,o,a,h)}else if(n){r.default.unlink(e,(l=>{if(l){return h(l)}r.default.mkdir(e,i,onmkdir(e,t,i,s,n,o,a,h))}))}else if(f.isSymbolicLink()){return h(new c.SymlinkError(e,e+"/"+t.join("/")))}else{h(u)}}))}else{a=a||e;mkdir_(e,t,i,s,n,o,a,h)}};const checkCwdSync=e=>{let t=false;let i=undefined;try{t=r.default.statSync(e).isDirectory()}catch(e){i=e?.code}finally{if(!t){throw new h.CwdError(e,i??"ENOTDIR")}}};const mkdirSync=(e,t)=>{e=(0,l.normalizeWindowsPath)(e);const i=t.umask??18;const s=t.mode|448;const h=(s&i)!==0;const u=t.uid;const d=t.gid;const f=typeof u==="number"&&typeof d==="number"&&(u!==t.processUid||d!==t.processGid);const p=t.preserve;const m=t.unlink;const y=t.cache;const b=(0,l.normalizeWindowsPath)(t.cwd);const done=t=>{cSet(y,e,true);if(t&&f){(0,n.chownrSync)(t,u,d)}if(h){r.default.chmodSync(e,s)}};if(y&&cGet(y,e)===true){return done()}if(e===b){checkCwdSync(b);return done()}if(p){return done((0,o.mkdirpSync)(e,s)??undefined)}const _=(0,l.normalizeWindowsPath)(a.default.relative(b,e));const w=_.split("/");let g=undefined;for(let e=w.shift(),t=b;e&&(t+="/"+e);e=w.shift()){t=(0,l.normalizeWindowsPath)(a.default.resolve(t));if(cGet(y,t)){continue}try{r.default.mkdirSync(t,s);g=g||t;cSet(y,t,true)}catch(e){const i=r.default.lstatSync(t);if(i.isDirectory()){cSet(y,t,true);continue}else if(m){r.default.unlinkSync(t);r.default.mkdirSync(t,s);g=g||t;cSet(y,t,true);continue}else if(i.isSymbolicLink()){return new c.SymlinkError(t,t+"/"+w.join("/"))}}}return done(g)};t.mkdirSync=mkdirSync},8979:(e,t)=>{Object.defineProperty(t,"__esModule",{value:true});t.modeFix=void 0;const modeFix=(e,t,i)=>{e&=4095;if(i){e=(e|384)&~18}if(t){if(e&256){e|=64}if(e&32){e|=8}if(e&4){e|=1}}return e};t.modeFix=modeFix},637:(e,t)=>{Object.defineProperty(t,"__esModule",{value:true});t.normalizeUnicode=void 0;const i=Object.create(null);const{hasOwnProperty:s}=Object.prototype;const normalizeUnicode=e=>{if(!s.call(i,e)){i[e]=e.normalize("NFD")}return i[e]};t.normalizeUnicode=normalizeUnicode},1555:(e,t)=>{Object.defineProperty(t,"__esModule",{value:true});t.normalizeWindowsPath=void 0;const i=process.env.TESTING_TAR_FAKE_PLATFORM||process.platform;t.normalizeWindowsPath=i!=="win32"?e=>e:e=>e&&e.replace(/\\/g,"/")},8514:(e,t)=>{Object.defineProperty(t,"__esModule",{value:true});t.dealias=t.isNoFile=t.isFile=t.isAsync=t.isSync=t.isAsyncNoFile=t.isSyncNoFile=t.isAsyncFile=t.isSyncFile=void 0;const i=new Map([["C","cwd"],["f","file"],["z","gzip"],["P","preservePaths"],["U","unlink"],["strip-components","strip"],["stripComponents","strip"],["keep-newer","newer"],["keepNewer","newer"],["keep-newer-files","newer"],["keepNewerFiles","newer"],["k","keep"],["keep-existing","keep"],["keepExisting","keep"],["m","noMtime"],["no-mtime","noMtime"],["p","preserveOwner"],["L","follow"],["h","follow"],["onentry","onReadEntry"]]);const isSyncFile=e=>!!e.sync&&!!e.file;t.isSyncFile=isSyncFile;const isAsyncFile=e=>!e.sync&&!!e.file;t.isAsyncFile=isAsyncFile;const isSyncNoFile=e=>!!e.sync&&!e.file;t.isSyncNoFile=isSyncNoFile;const isAsyncNoFile=e=>!e.sync&&!e.file;t.isAsyncNoFile=isAsyncNoFile;const isSync=e=>!!e.sync;t.isSync=isSync;const isAsync=e=>!e.sync;t.isAsync=isAsync;const isFile=e=>!!e.file;t.isFile=isFile;const isNoFile=e=>!e.file;t.isNoFile=isNoFile;const dealiasKey=e=>{const t=i.get(e);if(t)return t;return e};const dealias=(e={})=>{if(!e)return{};const t={};for(const[i,s]of Object.entries(e)){const e=dealiasKey(i);t[e]=s}if(t.chmod===undefined&&t.noChmod===false){t.chmod=true}delete t.noChmod;return t};t.dealias=dealias},5970:function(e,t,i){var s=this&&this.__createBinding||(Object.create?function(e,t,i,s){if(s===undefined)s=i;var n=Object.getOwnPropertyDescriptor(t,i);if(!n||("get"in n?!t.__esModule:n.writable||n.configurable)){n={enumerable:true,get:function(){return t[i]}}}Object.defineProperty(e,s,n)}:function(e,t,i,s){if(s===undefined)s=i;e[s]=t[i]});var n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var i in e)if(i!=="default"&&Object.prototype.hasOwnProperty.call(e,i))s(t,e,i);n(t,e);return t};var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});t.PackSync=t.Pack=t.PackJob=void 0;const a=o(i(7147));const h=i(7304);class PackJob{path;absolute;entry;stat;readdir;pending=false;ignore=false;piped=false;constructor(e,t){this.path=e||"./";this.absolute=t}}t.PackJob=PackJob;const l=i(3993);const c=r(i(6890));const u=i(1564);const d=i(8738);const f=i(5241);const p=Buffer.alloc(1024);const m=Symbol("onStat");const y=Symbol("ended");const b=Symbol("queue");const _=Symbol("current");const w=Symbol("process");const g=Symbol("processing");const E=Symbol("processJob");const S=Symbol("jobs");const R=Symbol("jobDone");const O=Symbol("addFSEntry");const v=Symbol("addTarEntry");const k=Symbol("stat");const P=Symbol("readdir");const M=Symbol("onreaddir");const T=Symbol("pipe");const N=Symbol("entry");const D=Symbol("entryOpt");const A=Symbol("writeEntryClass");const L=Symbol("write");const x=Symbol("ondrain");const I=o(i(1017));const F=i(1555);class Pack extends l.Minipass{opt;cwd;maxReadSize;preservePaths;strict;noPax;prefix;linkCache;statCache;file;portable;zip;readdirCache;noDirRecurse;follow;noMtime;mtime;filter;jobs;[A];onWriteEntry;[b];[S]=0;[g]=false;[y]=false;constructor(e={}){super();this.opt=e;this.file=e.file||"";this.cwd=e.cwd||process.cwd();this.maxReadSize=e.maxReadSize;this.preservePaths=!!e.preservePaths;this.strict=!!e.strict;this.noPax=!!e.noPax;this.prefix=(0,F.normalizeWindowsPath)(e.prefix||"");this.linkCache=e.linkCache||new Map;this.statCache=e.statCache||new Map;this.readdirCache=e.readdirCache||new Map;this.onWriteEntry=e.onWriteEntry;this[A]=h.WriteEntry;if(typeof e.onwarn==="function"){this.on("warn",e.onwarn)}this.portable=!!e.portable;if(e.gzip||e.brotli){if(e.gzip&&e.brotli){throw new TypeError("gzip and brotli are mutually exclusive")}if(e.gzip){if(typeof e.gzip!=="object"){e.gzip={}}if(this.portable){e.gzip.portable=true}this.zip=new c.Gzip(e.gzip)}if(e.brotli){if(typeof e.brotli!=="object"){e.brotli={}}this.zip=new c.BrotliCompress(e.brotli)}if(!this.zip)throw new Error("impossible");const t=this.zip;t.on("data",(e=>super.write(e)));t.on("end",(()=>super.end()));t.on("drain",(()=>this[x]()));this.on("resume",(()=>t.resume()))}else{this.on("drain",this[x])}this.noDirRecurse=!!e.noDirRecurse;this.follow=!!e.follow;this.noMtime=!!e.noMtime;if(e.mtime)this.mtime=e.mtime;this.filter=typeof e.filter==="function"?e.filter:()=>true;this[b]=new u.Yallist;this[S]=0;this.jobs=Number(e.jobs)||4;this[g]=false;this[y]=false}[L](e){return super.write(e)}add(e){this.write(e);return this}end(e){if(e){this.add(e)}this[y]=true;this[w]();return this}write(e){if(this[y]){throw new Error("write after end")}if(e instanceof d.ReadEntry){this[v](e)}else{this[O](e)}return this.flowing}[v](e){const t=(0,F.normalizeWindowsPath)(I.default.resolve(this.cwd,e.path));if(!this.filter(e.path,e)){e.resume()}else{const i=new PackJob(e.path,t);i.entry=new h.WriteEntryTar(e,this[D](i));i.entry.on("end",(()=>this[R](i)));this[S]+=1;this[b].push(i)}this[w]()}[O](e){const t=(0,F.normalizeWindowsPath)(I.default.resolve(this.cwd,e));this[b].push(new PackJob(e,t));this[w]()}[k](e){e.pending=true;this[S]+=1;const t=this.follow?"stat":"lstat";a.default[t](e.absolute,((t,i)=>{e.pending=false;this[S]-=1;if(t){this.emit("error",t)}else{this[m](e,i)}}))}[m](e,t){this.statCache.set(e.absolute,t);e.stat=t;if(!this.filter(e.path,t)){e.ignore=true}this[w]()}[P](e){e.pending=true;this[S]+=1;a.default.readdir(e.absolute,((t,i)=>{e.pending=false;this[S]-=1;if(t){return this.emit("error",t)}this[M](e,i)}))}[M](e,t){this.readdirCache.set(e.absolute,t);e.readdir=t;this[w]()}[w](){if(this[g]){return}this[g]=true;for(let e=this[b].head;!!e&&this[S]<this.jobs;e=e.next){this[E](e.value);if(e.value.ignore){const t=e.next;this[b].removeNode(e);e.next=t}}this[g]=false;if(this[y]&&!this[b].length&&this[S]===0){if(this.zip){this.zip.end(p)}else{super.write(p);super.end()}}}get[_](){return this[b]&&this[b].head&&this[b].head.value}[R](e){this[b].shift();this[S]-=1;this[w]()}[E](e){if(e.pending){return}if(e.entry){if(e===this[_]&&!e.piped){this[T](e)}return}if(!e.stat){const t=this.statCache.get(e.absolute);if(t){this[m](e,t)}else{this[k](e)}}if(!e.stat){return}if(e.ignore){return}if(!this.noDirRecurse&&e.stat.isDirectory()&&!e.readdir){const t=this.readdirCache.get(e.absolute);if(t){this[M](e,t)}else{this[P](e)}if(!e.readdir){return}}e.entry=this[N](e);if(!e.entry){e.ignore=true;return}if(e===this[_]&&!e.piped){this[T](e)}}[D](e){return{onwarn:(e,t,i)=>this.warn(e,t,i),noPax:this.noPax,cwd:this.cwd,absolute:e.absolute,preservePaths:this.preservePaths,maxReadSize:this.maxReadSize,strict:this.strict,portable:this.portable,linkCache:this.linkCache,statCache:this.statCache,noMtime:this.noMtime,mtime:this.mtime,prefix:this.prefix}}[N](e){this[S]+=1;try{const t=new this[A](e.path,this[D](e));this.onWriteEntry?.(t);return t.on("end",(()=>this[R](e))).on("error",(e=>this.emit("error",e)))}catch(e){this.emit("error",e)}}[x](){if(this[_]&&this[_].entry){this[_].entry.resume()}}[T](e){e.piped=true;if(e.readdir){e.readdir.forEach((t=>{const i=e.path;const s=i==="./"?"":i.replace(/\/*$/,"/");this[O](s+t)}))}const t=e.entry;const i=this.zip;if(!t)throw new Error("cannot pipe without source");if(i){t.on("data",(e=>{if(!i.write(e)){t.pause()}}))}else{t.on("data",(e=>{if(!super.write(e)){t.pause()}}))}}pause(){if(this.zip){this.zip.pause()}return super.pause()}warn(e,t,i={}){(0,f.warnMethod)(this,e,t,i)}}t.Pack=Pack;class PackSync extends Pack{sync=true;constructor(e){super(e);this[A]=h.WriteEntrySync}pause(){}resume(){}[k](e){const t=this.follow?"statSync":"lstatSync";this[m](e,a.default[t](e.absolute))}[P](e){this[M](e,a.default.readdirSync(e.absolute))}[T](e){const t=e.entry;const i=this.zip;if(e.readdir){e.readdir.forEach((t=>{const i=e.path;const s=i==="./"?"":i.replace(/\/*$/,"/");this[O](s+t)}))}if(!t)throw new Error("Cannot pipe without source");if(i){t.on("data",(e=>{i.write(e)}))}else{t.on("data",(e=>{super[L](e)}))}}}t.PackSync=PackSync},9022:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:true});t.Parser=void 0;const s=i(2361);const n=i(6890);const r=i(1564);const o=i(9297);const a=i(143);const h=i(8738);const l=i(5241);const c=1024*1024;const u=Buffer.from([31,139]);const d=Symbol("state");const f=Symbol("writeEntry");const p=Symbol("readEntry");const m=Symbol("nextEntry");const y=Symbol("processEntry");const b=Symbol("extendedHeader");const _=Symbol("globalExtendedHeader");const w=Symbol("meta");const g=Symbol("emitMeta");const E=Symbol("buffer");const S=Symbol("queue");const R=Symbol("ended");const O=Symbol("emittedEnd");const v=Symbol("emit");const k=Symbol("unzip");const P=Symbol("consumeChunk");const M=Symbol("consumeChunkSub");const T=Symbol("consumeBody");const N=Symbol("consumeMeta");const D=Symbol("consumeHeader");const A=Symbol("consuming");const L=Symbol("bufferConcat");const x=Symbol("maybeEnd");const I=Symbol("writing");const F=Symbol("aborted");const B=Symbol("onDone");const C=Symbol("sawValidEntry");const z=Symbol("sawNullBlock");const j=Symbol("sawEOF");const U=Symbol("closeStream");const noop=()=>true;class Parser extends s.EventEmitter{file;strict;maxMetaEntrySize;filter;brotli;writable=true;readable=false;[S]=new r.Yallist;[E];[p];[f];[d]="begin";[w]="";[b];[_];[R]=false;[k];[F]=false;[C];[z]=false;[j]=false;[I]=false;[A]=false;[O]=false;constructor(e={}){super();this.file=e.file||"";this.on(B,(()=>{if(this[d]==="begin"||this[C]===false){this.warn("TAR_BAD_ARCHIVE","Unrecognized archive format")}}));if(e.ondone){this.on(B,e.ondone)}else{this.on(B,(()=>{this.emit("prefinish");this.emit("finish");this.emit("end")}))}this.strict=!!e.strict;this.maxMetaEntrySize=e.maxMetaEntrySize||c;this.filter=typeof e.filter==="function"?e.filter:noop;const t=e.file&&(e.file.endsWith(".tar.br")||e.file.endsWith(".tbr"));this.brotli=!e.gzip&&e.brotli!==undefined?e.brotli:t?undefined:false;this.on("end",(()=>this[U]()));if(typeof e.onwarn==="function"){this.on("warn",e.onwarn)}if(typeof e.onReadEntry==="function"){this.on("entry",e.onReadEntry)}}warn(e,t,i={}){(0,l.warnMethod)(this,e,t,i)}[D](e,t){if(this[C]===undefined){this[C]=false}let i;try{i=new o.Header(e,t,this[b],this[_])}catch(e){return this.warn("TAR_ENTRY_INVALID",e)}if(i.nullBlock){if(this[z]){this[j]=true;if(this[d]==="begin"){this[d]="header"}this[v]("eof")}else{this[z]=true;this[v]("nullBlock")}}else{this[z]=false;if(!i.cksumValid){this.warn("TAR_ENTRY_INVALID","checksum failure",{header:i})}else if(!i.path){this.warn("TAR_ENTRY_INVALID","path is required",{header:i})}else{const e=i.type;if(/^(Symbolic)?Link$/.test(e)&&!i.linkpath){this.warn("TAR_ENTRY_INVALID","linkpath required",{header:i})}else if(!/^(Symbolic)?Link$/.test(e)&&!/^(Global)?ExtendedHeader$/.test(e)&&i.linkpath){this.warn("TAR_ENTRY_INVALID","linkpath forbidden",{header:i})}else{const e=this[f]=new h.ReadEntry(i,this[b],this[_]);if(!this[C]){if(e.remain){const onend=()=>{if(!e.invalid){this[C]=true}};e.on("end",onend)}else{this[C]=true}}if(e.meta){if(e.size>this.maxMetaEntrySize){e.ignore=true;this[v]("ignoredEntry",e);this[d]="ignore";e.resume()}else if(e.size>0){this[w]="";e.on("data",(e=>this[w]+=e));this[d]="meta"}}else{this[b]=undefined;e.ignore=e.ignore||!this.filter(e.path,e);if(e.ignore){this[v]("ignoredEntry",e);this[d]=e.remain?"ignore":"header";e.resume()}else{if(e.remain){this[d]="body"}else{this[d]="header";e.end()}if(!this[p]){this[S].push(e);this[m]()}else{this[S].push(e)}}}}}}}[U](){queueMicrotask((()=>this.emit("close")))}[y](e){let t=true;if(!e){this[p]=undefined;t=false}else if(Array.isArray(e)){const[t,...i]=e;this.emit(t,...i)}else{this[p]=e;this.emit("entry",e);if(!e.emittedEnd){e.on("end",(()=>this[m]()));t=false}}return t}[m](){do{}while(this[y](this[S].shift()));if(!this[S].length){const e=this[p];const t=!e||e.flowing||e.size===e.remain;if(t){if(!this[I]){this.emit("drain")}}else{e.once("drain",(()=>this.emit("drain")))}}}[T](e,t){const i=this[f];if(!i){throw new Error("attempt to consume body without entry??")}const s=i.blockRemain??0;const n=s>=e.length&&t===0?e:e.subarray(t,t+s);i.write(n);if(!i.blockRemain){this[d]="header";this[f]=undefined;i.end()}return n.length}[N](e,t){const i=this[f];const s=this[T](e,t);if(!this[f]&&i){this[g](i)}return s}[v](e,t,i){if(!this[S].length&&!this[p]){this.emit(e,t,i)}else{this[S].push([e,t,i])}}[g](e){this[v]("meta",this[w]);switch(e.type){case"ExtendedHeader":case"OldExtendedHeader":this[b]=a.Pax.parse(this[w],this[b],false);break;case"GlobalExtendedHeader":this[_]=a.Pax.parse(this[w],this[_],true);break;case"NextFileHasLongPath":case"OldGnuLongPath":{const e=this[b]??Object.create(null);this[b]=e;e.path=this[w].replace(/\0.*/,"");break}case"NextFileHasLongLinkpath":{const e=this[b]||Object.create(null);this[b]=e;e.linkpath=this[w].replace(/\0.*/,"");break}default:throw new Error("unknown meta: "+e.type)}}abort(e){this[F]=true;this.emit("abort",e);this.warn("TAR_ABORT",e,{recoverable:false})}write(e,t,i){if(typeof t==="function"){i=t;t=undefined}if(typeof e==="string"){e=Buffer.from(e,typeof t==="string"?t:"utf8")}if(this[F]){i?.();return false}const s=this[k]===undefined||this.brotli===undefined&&this[k]===false;if(s&&e){if(this[E]){e=Buffer.concat([this[E],e]);this[E]=undefined}if(e.length<u.length){this[E]=e;i?.();return true}for(let t=0;this[k]===undefined&&t<u.length;t++){if(e[t]!==u[t]){this[k]=false}}const t=this.brotli===undefined;if(this[k]===false&&t){if(e.length<512){if(this[R]){this.brotli=true}else{this[E]=e;i?.();return true}}else{try{new o.Header(e.subarray(0,512));this.brotli=false}catch(e){this.brotli=true}}}if(this[k]===undefined||this[k]===false&&this.brotli){const t=this[R];this[R]=false;this[k]=this[k]===undefined?new n.Unzip({}):new n.BrotliDecompress({});this[k].on("data",(e=>this[P](e)));this[k].on("error",(e=>this.abort(e)));this[k].on("end",(()=>{this[R]=true;this[P]()}));this[I]=true;const s=!!this[k][t?"end":"write"](e);this[I]=false;i?.();return s}}this[I]=true;if(this[k]){this[k].write(e)}else{this[P](e)}this[I]=false;const r=this[S].length?false:this[p]?this[p].flowing:true;if(!r&&!this[S].length){this[p]?.once("drain",(()=>this.emit("drain")))}i?.();return r}[L](e){if(e&&!this[F]){this[E]=this[E]?Buffer.concat([this[E],e]):e}}[x](){if(this[R]&&!this[O]&&!this[F]&&!this[A]){this[O]=true;const e=this[f];if(e&&e.blockRemain){const t=this[E]?this[E].length:0;this.warn("TAR_BAD_ARCHIVE",`Truncated input (needed ${e.blockRemain} more bytes, only ${t} available)`,{entry:e});if(this[E]){e.write(this[E])}e.end()}this[v](B)}}[P](e){if(this[A]&&e){this[L](e)}else if(!e&&!this[E]){this[x]()}else if(e){this[A]=true;if(this[E]){this[L](e);const t=this[E];this[E]=undefined;this[M](t)}else{this[M](e)}while(this[E]&&this[E]?.length>=512&&!this[F]&&!this[j]){const e=this[E];this[E]=undefined;this[M](e)}this[A]=false}if(!this[E]||this[R]){this[x]()}}[M](e){let t=0;const i=e.length;while(t+512<=i&&!this[F]&&!this[j]){switch(this[d]){case"begin":case"header":this[D](e,t);t+=512;break;case"ignore":case"body":t+=this[T](e,t);break;case"meta":t+=this[N](e,t);break;default:throw new Error("invalid state: "+this[d])}}if(t<i){if(this[E]){this[E]=Buffer.concat([e.subarray(t),this[E]])}else{this[E]=e.subarray(t)}}}end(e,t,i){if(typeof e==="function"){i=e;t=undefined;e=undefined}if(typeof t==="function"){i=t;t=undefined}if(typeof e==="string"){e=Buffer.from(e,t)}if(i)this.once("finish",i);if(!this[F]){if(this[k]){if(e)this[k].write(e);this[k].end()}else{this[R]=true;if(this.brotli===undefined)e=e||Buffer.alloc(0);if(e)this.write(e);this[x]()}}return this}}t.Parser=Parser},3277:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:true});t.PathReservations=void 0;const s=i(9411);const n=i(637);const r=i(7519);const o=process.env.TESTING_TAR_FAKE_PLATFORM||process.platform;const a=o==="win32";const getDirs=e=>{const t=e.split("/").slice(0,-1).reduce(((e,t)=>{const i=e[e.length-1];if(i!==undefined){t=(0,s.join)(i,t)}e.push(t||"/");return e}),[]);return t};class PathReservations{#d=new Map;#f=new Map;#p=new Set;reserve(e,t){e=a?["win32 parallelization disabled"]:e.map((e=>(0,r.stripTrailingSlashes)((0,s.join)((0,n.normalizeUnicode)(e))).toLowerCase()));const i=new Set(e.map((e=>getDirs(e))).reduce(((e,t)=>e.concat(t))));this.#f.set(t,{dirs:i,paths:e});for(const i of e){const e=this.#d.get(i);if(!e){this.#d.set(i,[t])}else{e.push(t)}}for(const e of i){const i=this.#d.get(e);if(!i){this.#d.set(e,[new Set([t])])}else{const e=i[i.length-1];if(e instanceof Set){e.add(t)}else{i.push(new Set([t]))}}}return this.#m(t)}#y(e){const t=this.#f.get(e);if(!t){throw new Error("function does not have any path reservations")}return{paths:t.paths.map((e=>this.#d.get(e))),dirs:[...t.dirs].map((e=>this.#d.get(e)))}}check(e){const{paths:t,dirs:i}=this.#y(e);return t.every((t=>t&&t[0]===e))&&i.every((t=>t&&t[0]instanceof Set&&t[0].has(e)))}#m(e){if(this.#p.has(e)||!this.check(e)){return false}this.#p.add(e);e((()=>this.#b(e)));return true}#b(e){if(!this.#p.has(e)){return false}const t=this.#f.get(e);if(!t){throw new Error("invalid reservation")}const{paths:i,dirs:s}=t;const n=new Set;for(const t of i){const i=this.#d.get(t);if(!i||i?.[0]!==e){continue}const s=i[1];if(!s){this.#d.delete(t);continue}i.shift();if(typeof s==="function"){n.add(s)}else{for(const e of s){n.add(e)}}}for(const t of s){const i=this.#d.get(t);const s=i?.[0];if(!i||!(s instanceof Set))continue;if(s.size===1&&i.length===1){this.#d.delete(t);continue}else if(s.size===1){i.shift();const e=i[0];if(typeof e==="function"){n.add(e)}}else{s.delete(e)}}this.#p.delete(e);n.forEach((e=>this.#m(e)));return true}}t.PathReservations=PathReservations},143:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:true});t.Pax=void 0;const s=i(9411);const n=i(9297);class Pax{atime;mtime;ctime;charset;comment;gid;uid;gname;uname;linkpath;dev;ino;nlink;path;size;mode;global;constructor(e,t=false){this.atime=e.atime;this.charset=e.charset;this.comment=e.comment;this.ctime=e.ctime;this.dev=e.dev;this.gid=e.gid;this.global=t;this.gname=e.gname;this.ino=e.ino;this.linkpath=e.linkpath;this.mtime=e.mtime;this.nlink=e.nlink;this.path=e.path;this.size=e.size;this.uid=e.uid;this.uname=e.uname}encode(){const e=this.encodeBody();if(e===""){return Buffer.allocUnsafe(0)}const t=Buffer.byteLength(e);const i=512*Math.ceil(1+t/512);const r=Buffer.allocUnsafe(i);for(let e=0;e<512;e++){r[e]=0}new n.Header({path:("PaxHeader/"+(0,s.basename)(this.path??"")).slice(0,99),mode:this.mode||420,uid:this.uid,gid:this.gid,size:t,mtime:this.mtime,type:this.global?"GlobalExtendedHeader":"ExtendedHeader",linkpath:"",uname:this.uname||"",gname:this.gname||"",devmaj:0,devmin:0,atime:this.atime,ctime:this.ctime}).encode(r);r.write(e,512,t,"utf8");for(let e=t+512;e<r.length;e++){r[e]=0}return r}encodeBody(){return this.encodeField("path")+this.encodeField("ctime")+this.encodeField("atime")+this.encodeField("dev")+this.encodeField("ino")+this.encodeField("nlink")+this.encodeField("charset")+this.encodeField("comment")+this.encodeField("gid")+this.encodeField("gname")+this.encodeField("linkpath")+this.encodeField("mtime")+this.encodeField("size")+this.encodeField("uid")+this.encodeField("uname")}encodeField(e){if(this[e]===undefined){return""}const t=this[e];const i=t instanceof Date?t.getTime()/1e3:t;const s=" "+(e==="dev"||e==="ino"||e==="nlink"?"SCHILY.":"")+e+"="+i+"\n";const n=Buffer.byteLength(s);let r=Math.floor(Math.log(n)/Math.log(10))+1;if(n+r>=Math.pow(10,r)){r+=1}const o=r+n;return o+s}static parse(e,t,i=false){return new Pax(merge(parseKV(e),t),i)}}t.Pax=Pax;const merge=(e,t)=>t?Object.assign({},t,e):e;const parseKV=e=>e.replace(/\n$/,"").split("\n").reduce(parseKVLine,Object.create(null));const parseKVLine=(e,t)=>{const i=parseInt(t,10);if(i!==Buffer.byteLength(t)+1){return e}t=t.slice((i+" ").length);const s=t.split("=");const n=s.shift();if(!n){return e}const r=n.replace(/^SCHILY\.(dev|ino|nlink)/,"$1");const o=s.join("=");e[r]=/^([A-Z]+\.)?([mac]|birth|creation)time$/.test(r)?new Date(Number(o)*1e3):/^[0-9]+$/.test(o)?+o:o;return e}},8738:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:true});t.ReadEntry=void 0;const s=i(3993);const n=i(1555);class ReadEntry extends s.Minipass{extended;globalExtended;header;startBlockSize;blockRemain;remain;type;meta=false;ignore=false;path;mode;uid;gid;uname;gname;size=0;mtime;atime;ctime;linkpath;dev;ino;nlink;invalid=false;absolute;unsupported=false;constructor(e,t,i){super({});this.pause();this.extended=t;this.globalExtended=i;this.header=e;this.remain=e.size??0;this.startBlockSize=512*Math.ceil(this.remain/512);this.blockRemain=this.startBlockSize;this.type=e.type;switch(this.type){case"File":case"OldFile":case"Link":case"SymbolicLink":case"CharacterDevice":case"BlockDevice":case"Directory":case"FIFO":case"ContiguousFile":case"GNUDumpDir":break;case"NextFileHasLongLinkpath":case"NextFileHasLongPath":case"OldGnuLongPath":case"GlobalExtendedHeader":case"ExtendedHeader":case"OldExtendedHeader":this.meta=true;break;default:this.ignore=true}if(!e.path){throw new Error("no path provided for tar.ReadEntry")}this.path=(0,n.normalizeWindowsPath)(e.path);this.mode=e.mode;if(this.mode){this.mode=this.mode&4095}this.uid=e.uid;this.gid=e.gid;this.uname=e.uname;this.gname=e.gname;this.size=this.remain;this.mtime=e.mtime;this.atime=e.atime;this.ctime=e.ctime;this.linkpath=e.linkpath?(0,n.normalizeWindowsPath)(e.linkpath):undefined;this.uname=e.uname;this.gname=e.gname;if(t){this.#u(t)}if(i){this.#u(i,true)}}write(e){const t=e.length;if(t>this.blockRemain){throw new Error("writing more to entry than is appropriate")}const i=this.remain;const s=this.blockRemain;this.remain=Math.max(0,i-t);this.blockRemain=Math.max(0,s-t);if(this.ignore){return true}if(i>=t){return super.write(e)}return super.write(e.subarray(0,i))}#u(e,t=false){if(e.path)e.path=(0,n.normalizeWindowsPath)(e.path);if(e.linkpath)e.linkpath=(0,n.normalizeWindowsPath)(e.linkpath);Object.assign(this,Object.fromEntries(Object.entries(e).filter((([e,i])=>!(i===null||i===undefined||e==="path"&&t)))))}}t.ReadEntry=ReadEntry},653:function(e,t,i){var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});t.replace=void 0;const n=i(9561);const r=s(i(7561));const o=s(i(9411));const a=i(9297);const h=i(8204);const l=i(121);const c=i(8514);const u=i(5970);const replaceSync=(e,t)=>{const i=new u.PackSync(e);let s=true;let n;let o;try{try{n=r.default.openSync(e.file,"r+")}catch(t){if(t?.code==="ENOENT"){n=r.default.openSync(e.file,"w+")}else{throw t}}const h=r.default.fstatSync(n);const l=Buffer.alloc(512);e:for(o=0;o<h.size;o+=512){for(let e=0,t=0;e<512;e+=t){t=r.default.readSync(n,l,e,l.length-e,o+e);if(o===0&&l[0]===31&&l[1]===139){throw new Error("cannot append to compressed archives")}if(!t){break e}}const t=new a.Header(l);if(!t.cksumValid){break}const i=512*Math.ceil((t.size||0)/512);if(o+i+512>h.size){break}o+=i;if(e.mtimeCache&&t.mtime){e.mtimeCache.set(String(t.path),t.mtime)}}s=false;streamSync(e,i,o,n,t)}finally{if(s){try{r.default.closeSync(n)}catch(e){}}}};const streamSync=(e,t,i,s,r)=>{const o=new n.WriteStreamSync(e.file,{fd:s,start:i});t.pipe(o);addFilesSync(t,r)};const replaceAsync=(e,t)=>{t=Array.from(t);const i=new u.Pack(e);const getPos=(t,i,s)=>{const cb=(e,i)=>{if(e){r.default.close(t,(t=>s(e)))}else{s(null,i)}};let n=0;if(i===0){return cb(null,0)}let o=0;const h=Buffer.alloc(512);const onread=(s,l)=>{if(s||typeof l==="undefined"){return cb(s)}o+=l;if(o<512&&l){return r.default.read(t,h,o,h.length-o,n+o,onread)}if(n===0&&h[0]===31&&h[1]===139){return cb(new Error("cannot append to compressed archives"))}if(o<512){return cb(null,n)}const c=new a.Header(h);if(!c.cksumValid){return cb(null,n)}const u=512*Math.ceil((c.size??0)/512);if(n+u+512>i){return cb(null,n)}n+=u+512;if(n>=i){return cb(null,n)}if(e.mtimeCache&&c.mtime){e.mtimeCache.set(String(c.path),c.mtime)}o=0;r.default.read(t,h,0,512,n,onread)};r.default.read(t,h,0,512,n,onread)};const s=new Promise(((s,o)=>{i.on("error",o);let a="r+";const onopen=(h,l)=>{if(h&&h.code==="ENOENT"&&a==="r+"){a="w+";return r.default.open(e.file,a,onopen)}if(h||!l){return o(h)}r.default.fstat(l,((a,h)=>{if(a){return r.default.close(l,(()=>o(a)))}getPos(l,h.size,((r,a)=>{if(r){return o(r)}const h=new n.WriteStream(e.file,{fd:l,start:a});i.pipe(h);h.on("error",o);h.on("close",s);addFilesAsync(i,t)}))}))};r.default.open(e.file,a,onopen)}));return s};const addFilesSync=(e,t)=>{t.forEach((t=>{if(t.charAt(0)==="@"){(0,h.list)({file:o.default.resolve(e.cwd,t.slice(1)),sync:true,noResume:true,onReadEntry:t=>e.add(t)})}else{e.add(t)}}));e.end()};const addFilesAsync=async(e,t)=>{for(let i=0;i<t.length;i++){const s=String(t[i]);if(s.charAt(0)==="@"){await(0,h.list)({file:o.default.resolve(String(e.cwd),s.slice(1)),noResume:true,onReadEntry:t=>e.add(t)})}else{e.add(s)}}e.end()};t.replace=(0,l.makeCommand)(replaceSync,replaceAsync,(()=>{throw new TypeError("file is required")}),(()=>{throw new TypeError("file is required")}),((e,t)=>{if(!(0,c.isFile)(e)){throw new TypeError("file is required")}if(e.gzip||e.brotli||e.file.endsWith(".br")||e.file.endsWith(".tbr")){throw new TypeError("cannot append to compressed archives")}if(!t?.length){throw new TypeError("no paths specified to add/replace")}}))},4392:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:true});t.stripAbsolutePath=void 0;const s=i(9411);const{isAbsolute:n,parse:r}=s.win32;const stripAbsolutePath=e=>{let t="";let i=r(e);while(n(e)||i.root){const s=e.charAt(0)==="/"&&e.slice(0,4)!=="//?/"?"/":i.root;e=e.slice(s.length);t+=s;i=r(e)}return[t,e]};t.stripAbsolutePath=stripAbsolutePath},7519:(e,t)=>{Object.defineProperty(t,"__esModule",{value:true});t.stripTrailingSlashes=void 0;const stripTrailingSlashes=e=>{let t=e.length-1;let i=-1;while(t>-1&&e.charAt(t)==="/"){i=t;t--}return i===-1?e:e.slice(0,i)};t.stripTrailingSlashes=stripTrailingSlashes},2253:(e,t)=>{Object.defineProperty(t,"__esModule",{value:true});t.SymlinkError=void 0;class SymlinkError extends Error{path;symlink;syscall="symlink";code="TAR_SYMLINK_ERROR";constructor(e,t){super("TAR_SYMLINK_ERROR: Cannot extract through symbolic link");this.symlink=e;this.path=t}get name(){return"SymlinkError"}}t.SymlinkError=SymlinkError},7398:(e,t)=>{Object.defineProperty(t,"__esModule",{value:true});t.code=t.name=t.isName=t.isCode=void 0;const isCode=e=>t.name.has(e);t.isCode=isCode;const isName=e=>t.code.has(e);t.isName=isName;t.name=new Map([["0","File"],["","OldFile"],["1","Link"],["2","SymbolicLink"],["3","CharacterDevice"],["4","BlockDevice"],["5","Directory"],["6","FIFO"],["7","ContiguousFile"],["g","GlobalExtendedHeader"],["x","ExtendedHeader"],["A","SolarisACL"],["D","GNUDumpDir"],["I","Inode"],["K","NextFileHasLongLinkpath"],["L","NextFileHasLongPath"],["M","ContinuationFile"],["N","OldGnuLongPath"],["S","SparseFile"],["V","TapeVolumeHeader"],["X","OldExtendedHeader"]]);t.code=new Map(Array.from(t.name).map((e=>[e[1],e[0]])))},8029:function(e,t,i){var s=this&&this.__createBinding||(Object.create?function(e,t,i,s){if(s===undefined)s=i;var n=Object.getOwnPropertyDescriptor(t,i);if(!n||("get"in n?!t.__esModule:n.writable||n.configurable)){n={enumerable:true,get:function(){return t[i]}}}Object.defineProperty(e,s,n)}:function(e,t,i,s){if(s===undefined)s=i;e[s]=t[i]});var n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var i in e)if(i!=="default"&&Object.prototype.hasOwnProperty.call(e,i))s(t,e,i);n(t,e);return t};var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});t.UnpackSync=t.Unpack=void 0;const a=r(i(9561));const h=o(i(8061));const l=i(6005);const c=o(i(7561));const u=o(i(9411));const d=i(9532);const f=i(714);const p=i(637);const m=i(1555);const y=i(9022);const b=i(4392);const _=i(7519);const w=r(i(898));const g=i(3277);const E=Symbol("onEntry");const S=Symbol("checkFs");const R=Symbol("checkFs2");const O=Symbol("pruneCache");const v=Symbol("isReusable");const k=Symbol("makeFs");const P=Symbol("file");const M=Symbol("directory");const T=Symbol("link");const N=Symbol("symlink");const D=Symbol("hardlink");const A=Symbol("unsupported");const L=Symbol("checkPath");const x=Symbol("mkdir");const I=Symbol("onError");const F=Symbol("pending");const B=Symbol("pend");const C=Symbol("unpend");const z=Symbol("ended");const j=Symbol("maybeClose");const U=Symbol("skip");const W=Symbol("doChown");const Z=Symbol("uid");const H=Symbol("gid");const G=Symbol("checkedCwd");const Y=process.env.TESTING_TAR_FAKE_PLATFORM||process.platform;const q=Y==="win32";const V=1024;const unlinkFile=(e,t)=>{if(!q){return c.default.unlink(e,t)}const i=e+".DELETE."+(0,l.randomBytes)(16).toString("hex");c.default.rename(e,i,(e=>{if(e){return t(e)}c.default.unlink(i,t)}))};const unlinkFileSync=e=>{if(!q){return c.default.unlinkSync(e)}const t=e+".DELETE."+(0,l.randomBytes)(16).toString("hex");c.default.renameSync(e,t);c.default.unlinkSync(t)};const uint32=(e,t,i)=>e!==undefined&&e===e>>>0?e:t!==undefined&&t===t>>>0?t:i;const cacheKeyNormalize=e=>(0,_.stripTrailingSlashes)((0,m.normalizeWindowsPath)((0,p.normalizeUnicode)(e))).toLowerCase();const pruneCache=(e,t)=>{t=cacheKeyNormalize(t);for(const i of e.keys()){const s=cacheKeyNormalize(i);if(s===t||s.indexOf(t+"/")===0){e.delete(i)}}};const dropCache=e=>{for(const t of e.keys()){e.delete(t)}};class Unpack extends y.Parser{[z]=false;[G]=false;[F]=0;reservations=new g.PathReservations;transform;writable=true;readable=false;dirCache;uid;gid;setOwner;preserveOwner;processGid;processUid;maxDepth;forceChown;win32;newer;keep;noMtime;preservePaths;unlink;cwd;strip;processUmask;umask;dmode;fmode;chmod;constructor(e={}){e.ondone=()=>{this[z]=true;this[j]()};super(e);this.transform=e.transform;this.dirCache=e.dirCache||new Map;this.chmod=!!e.chmod;if(typeof e.uid==="number"||typeof e.gid==="number"){if(typeof e.uid!=="number"||typeof e.gid!=="number"){throw new TypeError("cannot set owner without number uid and gid")}if(e.preserveOwner){throw new TypeError("cannot preserve owner in archive and also set owner explicitly")}this.uid=e.uid;this.gid=e.gid;this.setOwner=true}else{this.uid=undefined;this.gid=undefined;this.setOwner=false}if(e.preserveOwner===undefined&&typeof e.uid!=="number"){this.preserveOwner=!!(process.getuid&&process.getuid()===0)}else{this.preserveOwner=!!e.preserveOwner}this.processUid=(this.preserveOwner||this.setOwner)&&process.getuid?process.getuid():undefined;this.processGid=(this.preserveOwner||this.setOwner)&&process.getgid?process.getgid():undefined;this.maxDepth=typeof e.maxDepth==="number"?e.maxDepth:V;this.forceChown=e.forceChown===true;this.win32=!!e.win32||q;this.newer=!!e.newer;this.keep=!!e.keep;this.noMtime=!!e.noMtime;this.preservePaths=!!e.preservePaths;this.unlink=!!e.unlink;this.cwd=(0,m.normalizeWindowsPath)(u.default.resolve(e.cwd||process.cwd()));this.strip=Number(e.strip)||0;this.processUmask=!this.chmod?0:typeof e.processUmask==="number"?e.processUmask:process.umask();this.umask=typeof e.umask==="number"?e.umask:this.processUmask;this.dmode=e.dmode||511&~this.umask;this.fmode=e.fmode||438&~this.umask;this.on("entry",(e=>this[E](e)))}warn(e,t,i={}){if(e==="TAR_BAD_ARCHIVE"||e==="TAR_ABORT"){i.recoverable=false}return super.warn(e,t,i)}[j](){if(this[z]&&this[F]===0){this.emit("prefinish");this.emit("finish");this.emit("end")}}[L](e){const t=(0,m.normalizeWindowsPath)(e.path);const i=t.split("/");if(this.strip){if(i.length<this.strip){return false}if(e.type==="Link"){const t=(0,m.normalizeWindowsPath)(String(e.linkpath)).split("/");if(t.length>=this.strip){e.linkpath=t.slice(this.strip).join("/")}else{return false}}i.splice(0,this.strip);e.path=i.join("/")}if(isFinite(this.maxDepth)&&i.length>this.maxDepth){this.warn("TAR_ENTRY_ERROR","path excessively deep",{entry:e,path:t,depth:i.length,maxDepth:this.maxDepth});return false}if(!this.preservePaths){if(i.includes("..")||q&&/^[a-z]:\.\.$/i.test(i[0]??"")){this.warn("TAR_ENTRY_ERROR",`path contains '..'`,{entry:e,path:t});return false}const[s,n]=(0,b.stripAbsolutePath)(t);if(s){e.path=String(n);this.warn("TAR_ENTRY_INFO",`stripping ${s} from absolute path`,{entry:e,path:t})}}if(u.default.isAbsolute(e.path)){e.absolute=(0,m.normalizeWindowsPath)(u.default.resolve(e.path))}else{e.absolute=(0,m.normalizeWindowsPath)(u.default.resolve(this.cwd,e.path))}if(!this.preservePaths&&typeof e.absolute==="string"&&e.absolute.indexOf(this.cwd+"/")!==0&&e.absolute!==this.cwd){this.warn("TAR_ENTRY_ERROR","path escaped extraction target",{entry:e,path:(0,m.normalizeWindowsPath)(e.path),resolvedPath:e.absolute,cwd:this.cwd});return false}if(e.absolute===this.cwd&&e.type!=="Directory"&&e.type!=="GNUDumpDir"){return false}if(this.win32){const{root:t}=u.default.win32.parse(String(e.absolute));e.absolute=t+w.encode(String(e.absolute).slice(t.length));const{root:i}=u.default.win32.parse(e.path);e.path=i+w.encode(e.path.slice(i.length))}return true}[E](e){if(!this[L](e)){return e.resume()}h.default.equal(typeof e.absolute,"string");switch(e.type){case"Directory":case"GNUDumpDir":if(e.mode){e.mode=e.mode|448}case"File":case"OldFile":case"ContiguousFile":case"Link":case"SymbolicLink":return this[S](e);case"CharacterDevice":case"BlockDevice":case"FIFO":default:return this[A](e)}}[I](e,t){if(e.name==="CwdError"){this.emit("error",e)}else{this.warn("TAR_ENTRY_ERROR",e,{entry:t});this[C]();t.resume()}}[x](e,t,i){(0,f.mkdir)((0,m.normalizeWindowsPath)(e),{uid:this.uid,gid:this.gid,processUid:this.processUid,processGid:this.processGid,umask:this.processUmask,preserve:this.preservePaths,unlink:this.unlink,cache:this.dirCache,cwd:this.cwd,mode:t},i)}[W](e){return this.forceChown||this.preserveOwner&&(typeof e.uid==="number"&&e.uid!==this.processUid||typeof e.gid==="number"&&e.gid!==this.processGid)||typeof this.uid==="number"&&this.uid!==this.processUid||typeof this.gid==="number"&&this.gid!==this.processGid}[Z](e){return uint32(this.uid,e.uid,this.processUid)}[H](e){return uint32(this.gid,e.gid,this.processGid)}[P](e,t){const i=typeof e.mode==="number"?e.mode&4095:this.fmode;const s=new a.WriteStream(String(e.absolute),{flags:(0,d.getWriteFlag)(e.size),mode:i,autoClose:false});s.on("error",(i=>{if(s.fd){c.default.close(s.fd,(()=>{}))}s.write=()=>true;this[I](i,e);t()}));let n=1;const done=i=>{if(i){if(s.fd){c.default.close(s.fd,(()=>{}))}this[I](i,e);t();return}if(--n===0){if(s.fd!==undefined){c.default.close(s.fd,(i=>{if(i){this[I](i,e)}else{this[C]()}t()}))}}};s.on("finish",(()=>{const t=String(e.absolute);const i=s.fd;if(typeof i==="number"&&e.mtime&&!this.noMtime){n++;const s=e.atime||new Date;const r=e.mtime;c.default.futimes(i,s,r,(e=>e?c.default.utimes(t,s,r,(t=>done(t&&e))):done()))}if(typeof i==="number"&&this[W](e)){n++;const s=this[Z](e);const r=this[H](e);if(typeof s==="number"&&typeof r==="number"){c.default.fchown(i,s,r,(e=>e?c.default.chown(t,s,r,(t=>done(t&&e))):done()))}}done()}));const r=this.transform?this.transform(e)||e:e;if(r!==e){r.on("error",(i=>{this[I](i,e);t()}));e.pipe(r)}r.pipe(s)}[M](e,t){const i=typeof e.mode==="number"?e.mode&4095:this.dmode;this[x](String(e.absolute),i,(i=>{if(i){this[I](i,e);t();return}let s=1;const done=()=>{if(--s===0){t();this[C]();e.resume()}};if(e.mtime&&!this.noMtime){s++;c.default.utimes(String(e.absolute),e.atime||new Date,e.mtime,done)}if(this[W](e)){s++;c.default.chown(String(e.absolute),Number(this[Z](e)),Number(this[H](e)),done)}done()}))}[A](e){e.unsupported=true;this.warn("TAR_ENTRY_UNSUPPORTED",`unsupported entry type: ${e.type}`,{entry:e});e.resume()}[N](e,t){this[T](e,String(e.linkpath),"symlink",t)}[D](e,t){const i=(0,m.normalizeWindowsPath)(u.default.resolve(this.cwd,String(e.linkpath)));this[T](e,i,"link",t)}[B](){this[F]++}[C](){this[F]--;this[j]()}[U](e){this[C]();e.resume()}[v](e,t){return e.type==="File"&&!this.unlink&&t.isFile()&&t.nlink<=1&&!q}[S](e){this[B]();const t=[e.path];if(e.linkpath){t.push(e.linkpath)}this.reservations.reserve(t,(t=>this[R](e,t)))}[O](e){if(e.type==="SymbolicLink"){dropCache(this.dirCache)}else if(e.type!=="Directory"){pruneCache(this.dirCache,String(e.absolute))}}[R](e,t){this[O](e);const done=i=>{this[O](e);t(i)};const checkCwd=()=>{this[x](this.cwd,this.dmode,(t=>{if(t){this[I](t,e);done();return}this[G]=true;start()}))};const start=()=>{if(e.absolute!==this.cwd){const t=(0,m.normalizeWindowsPath)(u.default.dirname(String(e.absolute)));if(t!==this.cwd){return this[x](t,this.dmode,(t=>{if(t){this[I](t,e);done();return}afterMakeParent()}))}}afterMakeParent()};const afterMakeParent=()=>{c.default.lstat(String(e.absolute),((t,i)=>{if(i&&(this.keep||this.newer&&i.mtime>(e.mtime??i.mtime))){this[U](e);done();return}if(t||this[v](e,i)){return this[k](null,e,done)}if(i.isDirectory()){if(e.type==="Directory"){const t=this.chmod&&e.mode&&(i.mode&4095)!==e.mode;const afterChmod=t=>this[k](t??null,e,done);if(!t){return afterChmod()}return c.default.chmod(String(e.absolute),Number(e.mode),afterChmod)}if(e.absolute!==this.cwd){return c.default.rmdir(String(e.absolute),(t=>this[k](t??null,e,done)))}}if(e.absolute===this.cwd){return this[k](null,e,done)}unlinkFile(String(e.absolute),(t=>this[k](t??null,e,done)))}))};if(this[G]){start()}else{checkCwd()}}[k](e,t,i){if(e){this[I](e,t);i();return}switch(t.type){case"File":case"OldFile":case"ContiguousFile":return this[P](t,i);case"Link":return this[D](t,i);case"SymbolicLink":return this[N](t,i);case"Directory":case"GNUDumpDir":return this[M](t,i)}}[T](e,t,i,s){c.default[i](t,String(e.absolute),(t=>{if(t){this[I](t,e)}else{this[C]();e.resume()}s()}))}}t.Unpack=Unpack;const callSync=e=>{try{return[null,e()]}catch(e){return[e,null]}};class UnpackSync extends Unpack{sync=true;[k](e,t){return super[k](e,t,(()=>{}))}[S](e){this[O](e);if(!this[G]){const t=this[x](this.cwd,this.dmode);if(t){return this[I](t,e)}this[G]=true}if(e.absolute!==this.cwd){const t=(0,m.normalizeWindowsPath)(u.default.dirname(String(e.absolute)));if(t!==this.cwd){const i=this[x](t,this.dmode);if(i){return this[I](i,e)}}}const[t,i]=callSync((()=>c.default.lstatSync(String(e.absolute))));if(i&&(this.keep||this.newer&&i.mtime>(e.mtime??i.mtime))){return this[U](e)}if(t||this[v](e,i)){return this[k](null,e)}if(i.isDirectory()){if(e.type==="Directory"){const t=this.chmod&&e.mode&&(i.mode&4095)!==e.mode;const[s]=t?callSync((()=>{c.default.chmodSync(String(e.absolute),Number(e.mode))})):[];return this[k](s,e)}const[t]=callSync((()=>c.default.rmdirSync(String(e.absolute))));this[k](t,e)}const[s]=e.absolute===this.cwd?[]:callSync((()=>unlinkFileSync(String(e.absolute))));this[k](s,e)}[P](e,t){const i=typeof e.mode==="number"?e.mode&4095:this.fmode;const oner=i=>{let n;try{c.default.closeSync(s)}catch(e){n=e}if(i||n){this[I](i||n,e)}t()};let s;try{s=c.default.openSync(String(e.absolute),(0,d.getWriteFlag)(e.size),i)}catch(e){return oner(e)}const n=this.transform?this.transform(e)||e:e;if(n!==e){n.on("error",(t=>this[I](t,e)));e.pipe(n)}n.on("data",(e=>{try{c.default.writeSync(s,e,0,e.length)}catch(e){oner(e)}}));n.on("end",(()=>{let t=null;if(e.mtime&&!this.noMtime){const i=e.atime||new Date;const n=e.mtime;try{c.default.futimesSync(s,i,n)}catch(s){try{c.default.utimesSync(String(e.absolute),i,n)}catch(e){t=s}}}if(this[W](e)){const i=this[Z](e);const n=this[H](e);try{c.default.fchownSync(s,Number(i),Number(n))}catch(s){try{c.default.chownSync(String(e.absolute),Number(i),Number(n))}catch(e){t=t||s}}}oner(t)}))}[M](e,t){const i=typeof e.mode==="number"?e.mode&4095:this.dmode;const s=this[x](String(e.absolute),i);if(s){this[I](s,e);t();return}if(e.mtime&&!this.noMtime){try{c.default.utimesSync(String(e.absolute),e.atime||new Date,e.mtime)}catch(s){}}if(this[W](e)){try{c.default.chownSync(String(e.absolute),Number(this[Z](e)),Number(this[H](e)))}catch(s){}}t();e.resume()}[x](e,t){try{return(0,f.mkdirSync)((0,m.normalizeWindowsPath)(e),{uid:this.uid,gid:this.gid,processUid:this.processUid,processGid:this.processGid,umask:this.processUmask,preserve:this.preservePaths,unlink:this.unlink,cache:this.dirCache,cwd:this.cwd,mode:t})}catch(e){return e}}[T](e,t,i,s){const n=`${i}Sync`;try{c.default[n](t,String(e.absolute));s();e.resume()}catch(t){return this[I](t,e)}}}t.UnpackSync=UnpackSync},3026:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:true});t.update=void 0;const s=i(121);const n=i(653);t.update=(0,s.makeCommand)(n.replace.syncFile,n.replace.asyncFile,n.replace.syncNoFile,n.replace.asyncNoFile,((e,t=[])=>{n.replace.validate?.(e,t);mtimeFilter(e)}));const mtimeFilter=e=>{const t=e.filter;if(!e.mtimeCache){e.mtimeCache=new Map}e.filter=t?(i,s)=>t(i,s)&&!((e.mtimeCache?.get(i)??s.mtime??0)>(s.mtime??0)):(t,i)=>!((e.mtimeCache?.get(t)??i.mtime??0)>(i.mtime??0))}},5241:(e,t)=>{Object.defineProperty(t,"__esModule",{value:true});t.warnMethod=void 0;const warnMethod=(e,t,i,s={})=>{if(e.file){s.file=e.file}if(e.cwd){s.cwd=e.cwd}s.code=i instanceof Error&&i.code||t;s.tarCode=t;if(!e.strict&&s.recoverable!==false){if(i instanceof Error){s=Object.assign(i,s);i=i.message}e.emit("warn",t,i,s)}else if(i instanceof Error){e.emit("error",Object.assign(i,s))}else{e.emit("error",Object.assign(new Error(`${t}: ${i}`),s))}};t.warnMethod=warnMethod},898:(e,t)=>{Object.defineProperty(t,"__esModule",{value:true});t.decode=t.encode=void 0;const i=["|","<",">","?",":"];const s=i.map((e=>String.fromCharCode(61440+e.charCodeAt(0))));const n=new Map(i.map(((e,t)=>[e,s[t]])));const r=new Map(s.map(((e,t)=>[e,i[t]])));const encode=e=>i.reduce(((e,t)=>e.split(t).join(n.get(t))),e);t.encode=encode;const decode=e=>s.reduce(((e,t)=>e.split(t).join(r.get(t))),e);t.decode=decode},7304:function(e,t,i){var s=this&&this.__createBinding||(Object.create?function(e,t,i,s){if(s===undefined)s=i;var n=Object.getOwnPropertyDescriptor(t,i);if(!n||("get"in n?!t.__esModule:n.writable||n.configurable)){n={enumerable:true,get:function(){return t[i]}}}Object.defineProperty(e,s,n)}:function(e,t,i,s){if(s===undefined)s=i;e[s]=t[i]});var n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var i in e)if(i!=="default"&&Object.prototype.hasOwnProperty.call(e,i))s(t,e,i);n(t,e);return t};var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});t.WriteEntryTar=t.WriteEntrySync=t.WriteEntry=void 0;const a=o(i(7147));const h=i(3993);const l=o(i(1017));const c=i(9297);const u=i(8979);const d=i(1555);const f=i(8514);const p=i(143);const m=i(4392);const y=i(7519);const b=i(5241);const _=r(i(898));const prefixPath=(e,t)=>{if(!t){return(0,d.normalizeWindowsPath)(e)}e=(0,d.normalizeWindowsPath)(e).replace(/^\.(\/|$)/,"");return(0,y.stripTrailingSlashes)(t)+"/"+e};const w=16*1024*1024;const g=Symbol("process");const E=Symbol("file");const S=Symbol("directory");const R=Symbol("symlink");const O=Symbol("hardlink");const v=Symbol("header");const k=Symbol("read");const P=Symbol("lstat");const M=Symbol("onlstat");const T=Symbol("onread");const N=Symbol("onreadlink");const D=Symbol("openfile");const A=Symbol("onopenfile");const L=Symbol("close");const x=Symbol("mode");const I=Symbol("awaitDrain");const F=Symbol("ondrain");const B=Symbol("prefix");class WriteEntry extends h.Minipass{path;portable;myuid=process.getuid&&process.getuid()||0;myuser=process.env.USER||"";maxReadSize;linkCache;statCache;preservePaths;cwd;strict;mtime;noPax;noMtime;prefix;fd;blockLen=0;blockRemain=0;buf;pos=0;remain=0;length=0;offset=0;win32;absolute;header;type;linkpath;stat;#_=false;constructor(e,t={}){const i=(0,f.dealias)(t);super();this.path=(0,d.normalizeWindowsPath)(e);this.portable=!!i.portable;this.maxReadSize=i.maxReadSize||w;this.linkCache=i.linkCache||new Map;this.statCache=i.statCache||new Map;this.preservePaths=!!i.preservePaths;this.cwd=(0,d.normalizeWindowsPath)(i.cwd||process.cwd());this.strict=!!i.strict;this.noPax=!!i.noPax;this.noMtime=!!i.noMtime;this.mtime=i.mtime;this.prefix=i.prefix?(0,d.normalizeWindowsPath)(i.prefix):undefined;if(typeof i.onwarn==="function"){this.on("warn",i.onwarn)}let s=false;if(!this.preservePaths){const[e,t]=(0,m.stripAbsolutePath)(this.path);if(e&&typeof t==="string"){this.path=t;s=e}}this.win32=!!i.win32||process.platform==="win32";if(this.win32){this.path=_.decode(this.path.replace(/\\/g,"/"));e=e.replace(/\\/g,"/")}this.absolute=(0,d.normalizeWindowsPath)(i.absolute||l.default.resolve(this.cwd,e));if(this.path===""){this.path="./"}if(s){this.warn("TAR_ENTRY_INFO",`stripping ${s} from absolute path`,{entry:this,path:s+this.path})}const n=this.statCache.get(this.absolute);if(n){this[M](n)}else{this[P]()}}warn(e,t,i={}){return(0,b.warnMethod)(this,e,t,i)}emit(e,...t){if(e==="error"){this.#_=true}return super.emit(e,...t)}[P](){a.default.lstat(this.absolute,((e,t)=>{if(e){return this.emit("error",e)}this[M](t)}))}[M](e){this.statCache.set(this.absolute,e);this.stat=e;if(!e.isFile()){e.size=0}this.type=getType(e);this.emit("stat",e);this[g]()}[g](){switch(this.type){case"File":return this[E]();case"Directory":return this[S]();case"SymbolicLink":return this[R]();default:return this.end()}}[x](e){return(0,u.modeFix)(e,this.type==="Directory",this.portable)}[B](e){return prefixPath(e,this.prefix)}[v](){if(!this.stat){throw new Error("cannot write header before stat")}if(this.type==="Directory"&&this.portable){this.noMtime=true}this.header=new c.Header({path:this[B](this.path),linkpath:this.type==="Link"&&this.linkpath!==undefined?this[B](this.linkpath):this.linkpath,mode:this[x](this.stat.mode),uid:this.portable?undefined:this.stat.uid,gid:this.portable?undefined:this.stat.gid,size:this.stat.size,mtime:this.noMtime?undefined:this.mtime||this.stat.mtime,type:this.type==="Unsupported"?undefined:this.type,uname:this.portable?undefined:this.stat.uid===this.myuid?this.myuser:"",atime:this.portable?undefined:this.stat.atime,ctime:this.portable?undefined:this.stat.ctime});if(this.header.encode()&&!this.noPax){super.write(new p.Pax({atime:this.portable?undefined:this.header.atime,ctime:this.portable?undefined:this.header.ctime,gid:this.portable?undefined:this.header.gid,mtime:this.noMtime?undefined:this.mtime||this.header.mtime,path:this[B](this.path),linkpath:this.type==="Link"&&this.linkpath!==undefined?this[B](this.linkpath):this.linkpath,size:this.header.size,uid:this.portable?undefined:this.header.uid,uname:this.portable?undefined:this.header.uname,dev:this.portable?undefined:this.stat.dev,ino:this.portable?undefined:this.stat.ino,nlink:this.portable?undefined:this.stat.nlink}).encode())}const e=this.header?.block;if(!e){throw new Error("failed to encode header")}super.write(e)}[S](){if(!this.stat){throw new Error("cannot create directory entry without stat")}if(this.path.slice(-1)!=="/"){this.path+="/"}this.stat.size=0;this[v]();this.end()}[R](){a.default.readlink(this.absolute,((e,t)=>{if(e){return this.emit("error",e)}this[N](t)}))}[N](e){this.linkpath=(0,d.normalizeWindowsPath)(e);this[v]();this.end()}[O](e){if(!this.stat){throw new Error("cannot create link entry without stat")}this.type="Link";this.linkpath=(0,d.normalizeWindowsPath)(l.default.relative(this.cwd,e));this.stat.size=0;this[v]();this.end()}[E](){if(!this.stat){throw new Error("cannot create file entry without stat")}if(this.stat.nlink>1){const e=`${this.stat.dev}:${this.stat.ino}`;const t=this.linkCache.get(e);if(t?.indexOf(this.cwd)===0){return this[O](t)}this.linkCache.set(e,this.absolute)}this[v]();if(this.stat.size===0){return this.end()}this[D]()}[D](){a.default.open(this.absolute,"r",((e,t)=>{if(e){return this.emit("error",e)}this[A](t)}))}[A](e){this.fd=e;if(this.#_){return this[L]()}if(!this.stat){throw new Error("should stat before calling onopenfile")}this.blockLen=512*Math.ceil(this.stat.size/512);this.blockRemain=this.blockLen;const t=Math.min(this.blockLen,this.maxReadSize);this.buf=Buffer.allocUnsafe(t);this.offset=0;this.pos=0;this.remain=this.stat.size;this.length=this.buf.length;this[k]()}[k](){const{fd:e,buf:t,offset:i,length:s,pos:n}=this;if(e===undefined||t===undefined){throw new Error("cannot read file without first opening")}a.default.read(e,t,i,s,n,((e,t)=>{if(e){return this[L]((()=>this.emit("error",e)))}this[T](t)}))}[L](e=(()=>{})){if(this.fd!==undefined)a.default.close(this.fd,e)}[T](e){if(e<=0&&this.remain>0){const e=Object.assign(new Error("encountered unexpected EOF"),{path:this.absolute,syscall:"read",code:"EOF"});return this[L]((()=>this.emit("error",e)))}if(e>this.remain){const e=Object.assign(new Error("did not encounter expected EOF"),{path:this.absolute,syscall:"read",code:"EOF"});return this[L]((()=>this.emit("error",e)))}if(!this.buf){throw new Error("should have created buffer prior to reading")}if(e===this.remain){for(let t=e;t<this.length&&e<this.blockRemain;t++){this.buf[t+this.offset]=0;e++;this.remain++}}const t=this.offset===0&&e===this.buf.length?this.buf:this.buf.subarray(this.offset,this.offset+e);const i=this.write(t);if(!i){this[I]((()=>this[F]()))}else{this[F]()}}[I](e){this.once("drain",e)}write(e,t,i){if(typeof t==="function"){i=t;t=undefined}if(typeof e==="string"){e=Buffer.from(e,typeof t==="string"?t:"utf8")}if(this.blockRemain<e.length){const e=Object.assign(new Error("writing more data than expected"),{path:this.absolute});return this.emit("error",e)}this.remain-=e.length;this.blockRemain-=e.length;this.pos+=e.length;this.offset+=e.length;return super.write(e,null,i)}[F](){if(!this.remain){if(this.blockRemain){super.write(Buffer.alloc(this.blockRemain))}return this[L]((e=>e?this.emit("error",e):this.end()))}if(!this.buf){throw new Error("buffer lost somehow in ONDRAIN")}if(this.offset>=this.length){this.buf=Buffer.allocUnsafe(Math.min(this.blockRemain,this.buf.length));this.offset=0}this.length=this.buf.length-this.offset;this[k]()}}t.WriteEntry=WriteEntry;class WriteEntrySync extends WriteEntry{sync=true;[P](){this[M](a.default.lstatSync(this.absolute))}[R](){this[N](a.default.readlinkSync(this.absolute))}[D](){this[A](a.default.openSync(this.absolute,"r"))}[k](){let e=true;try{const{fd:t,buf:i,offset:s,length:n,pos:r}=this;if(t===undefined||i===undefined){throw new Error("fd and buf must be set in READ method")}const o=a.default.readSync(t,i,s,n,r);this[T](o);e=false}finally{if(e){try{this[L]((()=>{}))}catch(e){}}}}[I](e){e()}[L](e=(()=>{})){if(this.fd!==undefined)a.default.closeSync(this.fd);e()}}t.WriteEntrySync=WriteEntrySync;class WriteEntryTar extends h.Minipass{blockLen=0;blockRemain=0;buf=0;pos=0;remain=0;length=0;preservePaths;portable;strict;noPax;noMtime;readEntry;type;prefix;path;mode;uid;gid;uname;gname;header;mtime;atime;ctime;linkpath;size;warn(e,t,i={}){return(0,b.warnMethod)(this,e,t,i)}constructor(e,t={}){const i=(0,f.dealias)(t);super();this.preservePaths=!!i.preservePaths;this.portable=!!i.portable;this.strict=!!i.strict;this.noPax=!!i.noPax;this.noMtime=!!i.noMtime;this.readEntry=e;const{type:s}=e;if(s==="Unsupported"){throw new Error("writing entry that should be ignored")}this.type=s;if(this.type==="Directory"&&this.portable){this.noMtime=true}this.prefix=i.prefix;this.path=(0,d.normalizeWindowsPath)(e.path);this.mode=e.mode!==undefined?this[x](e.mode):undefined;this.uid=this.portable?undefined:e.uid;this.gid=this.portable?undefined:e.gid;this.uname=this.portable?undefined:e.uname;this.gname=this.portable?undefined:e.gname;this.size=e.size;this.mtime=this.noMtime?undefined:i.mtime||e.mtime;this.atime=this.portable?undefined:e.atime;this.ctime=this.portable?undefined:e.ctime;this.linkpath=e.linkpath!==undefined?(0,d.normalizeWindowsPath)(e.linkpath):undefined;if(typeof i.onwarn==="function"){this.on("warn",i.onwarn)}let n=false;if(!this.preservePaths){const[e,t]=(0,m.stripAbsolutePath)(this.path);if(e&&typeof t==="string"){this.path=t;n=e}}this.remain=e.size;this.blockRemain=e.startBlockSize;this.header=new c.Header({path:this[B](this.path),linkpath:this.type==="Link"&&this.linkpath!==undefined?this[B](this.linkpath):this.linkpath,mode:this.mode,uid:this.portable?undefined:this.uid,gid:this.portable?undefined:this.gid,size:this.size,mtime:this.noMtime?undefined:this.mtime,type:this.type,uname:this.portable?undefined:this.uname,atime:this.portable?undefined:this.atime,ctime:this.portable?undefined:this.ctime});if(n){this.warn("TAR_ENTRY_INFO",`stripping ${n} from absolute path`,{entry:this,path:n+this.path})}if(this.header.encode()&&!this.noPax){super.write(new p.Pax({atime:this.portable?undefined:this.atime,ctime:this.portable?undefined:this.ctime,gid:this.portable?undefined:this.gid,mtime:this.noMtime?undefined:this.mtime,path:this[B](this.path),linkpath:this.type==="Link"&&this.linkpath!==undefined?this[B](this.linkpath):this.linkpath,size:this.size,uid:this.portable?undefined:this.uid,uname:this.portable?undefined:this.uname,dev:this.portable?undefined:this.readEntry.dev,ino:this.portable?undefined:this.readEntry.ino,nlink:this.portable?undefined:this.readEntry.nlink}).encode())}const r=this.header?.block;if(!r)throw new Error("failed to encode header");super.write(r);e.pipe(this)}[B](e){return prefixPath(e,this.prefix)}[x](e){return(0,u.modeFix)(e,this.type==="Directory",this.portable)}write(e,t,i){if(typeof t==="function"){i=t;t=undefined}if(typeof e==="string"){e=Buffer.from(e,typeof t==="string"?t:"utf8")}const s=e.length;if(s>this.blockRemain){throw new Error("writing more to entry than is appropriate")}this.blockRemain-=s;return super.write(e,i)}end(e,t,i){if(this.blockRemain){super.write(Buffer.alloc(this.blockRemain))}if(typeof e==="function"){i=e;t=undefined;e=undefined}if(typeof t==="function"){i=t;t=undefined}if(typeof e==="string"){e=Buffer.from(e,t??"utf8")}if(i)this.once("finish",i);e?super.end(e,i):super.end(i);return this}}t.WriteEntryTar=WriteEntryTar;const getType=e=>e.isFile()?"File":e.isDirectory()?"Directory":e.isSymbolicLink()?"SymbolicLink":"Unsupported"},1564:(e,t)=>{Object.defineProperty(t,"__esModule",{value:true});t.Node=t.Yallist=void 0;class Yallist{tail;head;length=0;static create(e=[]){return new Yallist(e)}constructor(e=[]){for(const t of e){this.push(t)}}*[Symbol.iterator](){for(let e=this.head;e;e=e.next){yield e.value}}removeNode(e){if(e.list!==this){throw new Error("removing node which does not belong to this list")}const t=e.next;const i=e.prev;if(t){t.prev=i}if(i){i.next=t}if(e===this.head){this.head=t}if(e===this.tail){this.tail=i}this.length--;e.next=undefined;e.prev=undefined;e.list=undefined;return t}unshiftNode(e){if(e===this.head){return}if(e.list){e.list.removeNode(e)}const t=this.head;e.list=this;e.next=t;if(t){t.prev=e}this.head=e;if(!this.tail){this.tail=e}this.length++}pushNode(e){if(e===this.tail){return}if(e.list){e.list.removeNode(e)}const t=this.tail;e.list=this;e.prev=t;if(t){t.next=e}this.tail=e;if(!this.head){this.head=e}this.length++}push(...e){for(let t=0,i=e.length;t<i;t++){push(this,e[t])}return this.length}unshift(...e){for(var t=0,i=e.length;t<i;t++){unshift(this,e[t])}return this.length}pop(){if(!this.tail){return undefined}const e=this.tail.value;const t=this.tail;this.tail=this.tail.prev;if(this.tail){this.tail.next=undefined}else{this.head=undefined}t.list=undefined;this.length--;return e}shift(){if(!this.head){return undefined}const e=this.head.value;const t=this.head;this.head=this.head.next;if(this.head){this.head.prev=undefined}else{this.tail=undefined}t.list=undefined;this.length--;return e}forEach(e,t){t=t||this;for(let i=this.head,s=0;!!i;s++){e.call(t,i.value,s,this);i=i.next}}forEachReverse(e,t){t=t||this;for(let i=this.tail,s=this.length-1;!!i;s--){e.call(t,i.value,s,this);i=i.prev}}get(e){let t=0;let i=this.head;for(;!!i&&t<e;t++){i=i.next}if(t===e&&!!i){return i.value}}getReverse(e){let t=0;let i=this.tail;for(;!!i&&t<e;t++){i=i.prev}if(t===e&&!!i){return i.value}}map(e,t){t=t||this;const i=new Yallist;for(let s=this.head;!!s;){i.push(e.call(t,s.value,this));s=s.next}return i}mapReverse(e,t){t=t||this;var i=new Yallist;for(let s=this.tail;!!s;){i.push(e.call(t,s.value,this));s=s.prev}return i}reduce(e,t){let i;let s=this.head;if(arguments.length>1){i=t}else if(this.head){s=this.head.next;i=this.head.value}else{throw new TypeError("Reduce of empty list with no initial value")}for(var n=0;!!s;n++){i=e(i,s.value,n);s=s.next}return i}reduceReverse(e,t){let i;let s=this.tail;if(arguments.length>1){i=t}else if(this.tail){s=this.tail.prev;i=this.tail.value}else{throw new TypeError("Reduce of empty list with no initial value")}for(let t=this.length-1;!!s;t--){i=e(i,s.value,t);s=s.prev}return i}toArray(){const e=new Array(this.length);for(let t=0,i=this.head;!!i;t++){e[t]=i.value;i=i.next}return e}toArrayReverse(){const e=new Array(this.length);for(let t=0,i=this.tail;!!i;t++){e[t]=i.value;i=i.prev}return e}slice(e=0,t=this.length){if(t<0){t+=this.length}if(e<0){e+=this.length}const i=new Yallist;if(t<e||t<0){return i}if(e<0){e=0}if(t>this.length){t=this.length}let s=this.head;let n=0;for(n=0;!!s&&n<e;n++){s=s.next}for(;!!s&&n<t;n++,s=s.next){i.push(s.value)}return i}sliceReverse(e=0,t=this.length){if(t<0){t+=this.length}if(e<0){e+=this.length}const i=new Yallist;if(t<e||t<0){return i}if(e<0){e=0}if(t>this.length){t=this.length}let s=this.length;let n=this.tail;for(;!!n&&s>t;s--){n=n.prev}for(;!!n&&s>e;s--,n=n.prev){i.push(n.value)}return i}splice(e,t=0,...i){if(e>this.length){e=this.length-1}if(e<0){e=this.length+e}let s=this.head;for(let t=0;!!s&&t<e;t++){s=s.next}const n=[];for(let e=0;!!s&&e<t;e++){n.push(s.value);s=this.removeNode(s)}if(!s){s=this.tail}else if(s!==this.tail){s=s.prev}for(const e of i){s=insertAfter(this,s,e)}return n}reverse(){const e=this.head;const t=this.tail;for(let t=e;!!t;t=t.prev){const e=t.prev;t.prev=t.next;t.next=e}this.head=t;this.tail=e;return this}}t.Yallist=Yallist;function insertAfter(e,t,i){const s=t;const n=t?t.next:e.head;const r=new Node(i,s,n,e);if(r.next===undefined){e.tail=r}if(r.prev===undefined){e.head=r}e.length++;return r}function push(e,t){e.tail=new Node(t,e.tail,undefined,e);if(!e.head){e.head=e.tail}e.length++}function unshift(e,t){e.head=new Node(t,undefined,e.head,e);if(!e.tail){e.tail=e.head}e.length++}class Node{list;next;prev;value;constructor(e,t,i,s){this.list=s;this.value=e;if(t){t.next=this;this.prev=t}else{this.prev=undefined}if(i){i.prev=this;this.next=i}else{this.next=undefined}}}t.Node=Node}};var t={};function __nccwpck_require__(i){var s=t[i];if(s!==undefined){return s.exports}var n=t[i]={exports:{}};var r=true;try{e[i].call(n.exports,n,n.exports,__nccwpck_require__);r=false}finally{if(r)delete t[i]}return n.exports}if(typeof __nccwpck_require__!=="undefined")__nccwpck_require__.ab=__dirname+"/";var i=__nccwpck_require__(1122);module.exports=i})();